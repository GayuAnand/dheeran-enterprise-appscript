"use strict";(self.webpackChunkcap_webview=self.webpackChunkcap_webview||[]).push([[298],{8298:(Ot,T,s)=>{s.r(T),s.d(T,{TasksListComponent:()=>_,TasksModule:()=>xt,TasksRoutingModule:()=>S});var b=s(7582),D=s(6328),v=s(7398),Z=s(298),C=s(3365),r=s(5313),m=s(6825),h=s(7848),x=s(2300),t=s(5879),w=s(7917),y=s(2099),A=s(1705),N=s(9653),P=s(3969),d=s(6814),p=s(6223),J=s(3680),O=s(2296),u=s(9157),Q=s(617),E=s(2032),M=s(3566),L=s(8525),f=s(4104);function I(n,o){1&n&&(t.TgZ(0,"mat-icon",17),t._uU(1,"checklist"),t.qZA(),t._uU(2," Open "))}function U(n,o){1&n&&(t.TgZ(0,"mat-icon",17),t._uU(1,"done"),t.qZA(),t._uU(2," Done "))}function q(n,o){1&n&&(t.TgZ(0,"mat-icon",17),t._uU(1,"check_circle"),t.qZA(),t._uU(2," Verified "))}function K(n,o){1&n&&(t.TgZ(0,"mat-tab"),t.YNc(1,q,3,0,"ng-template",1),t.qZA())}function R(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.createRecord())}),t.TgZ(1,"mat-icon"),t._uU(2,"add"),t.qZA(),t._uU(3),t.qZA()}if(2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.TKey.COMMON.ADD)}}function Y(n,o){if(1&n&&(t.TgZ(0,"mat-header-cell",22),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.Q6J("ngClass","de-f-justifycenter"),t.xp6(1),t.Oqu("ACTIONS"===e?"":e)}}function $(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.OpenDateStr)}}function F(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.DoneDateStr)}}function H(n,o){if(1&n&&(t.TgZ(0,"div",28),t._UZ(1,"de-copyable-text",29),t.TgZ(2,"div",30),t._UZ(3,"de-mobile-number",31)(4,"de-mobile-number",32),t.qZA()()),2&n){const e=t.oxw(2).$implicit,i=t.oxw().$implicit;t.xp6(1),t.Q6J("text",e[i]),t.xp6(2),t.Q6J("mobile",e[i]),t.xp6(1),t.Q6J("mobile",e[i])}}function B(n,o){if(1&n&&(t.ynx(0),t.YNc(1,H,5,3,"div",27),t.BQk()),2&n){const e=t.oxw().$implicit,i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e[i])}}function G(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",35),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3).$implicit,c=t.oxw(2);return t.KtG(c.recordToDelete=a)}),t._uU(1,"delete"),t.qZA()}}function z(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-icon",33),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,c=t.oxw(2);return t.KtG(c.editRecord(a))}),t._uU(2,"edit"),t.qZA(),t.YNc(3,G,2,0,"mat-icon",34),t.BQk()}if(2&n){const e=t.oxw(4);t.xp6(3),t.Q6J("ngIf",e.authService.isTasksAdmin())}}function V(n,o){if(1&n&&(t.ynx(0),t.YNc(1,z,4,1,"ng-container",2),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",null==e?null:e.ID)}}function j(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw().$implicit,i=t.oxw().$implicit;t.xp6(1),t.Oqu(e[i])}}function W(n,o){if(1&n&&(t.TgZ(0,"mat-cell",23),t.ynx(1,24),t.YNc(2,$,2,1,"ng-container",25),t.YNc(3,F,2,1,"ng-container",25),t.YNc(4,B,2,1,"ng-container",25),t.YNc(5,V,2,1,"ng-container",25),t.YNc(6,j,2,1,"ng-container",26),t.BQk(),t.qZA()),2&n){const e=o.$implicit,i=t.oxw().$implicit,a=t.oxw();t.Q6J("ngClass",a.getCellClassNames(e,i)),t.xp6(1),t.Q6J("ngSwitch",i),t.xp6(1),t.Q6J("ngSwitchCase","OpenDate"),t.xp6(1),t.Q6J("ngSwitchCase","DoneDate"),t.xp6(1),t.Q6J("ngSwitchCase","MOBILE"),t.xp6(1),t.Q6J("ngSwitchCase","ACTIONS")}}function X(n,o){1&n&&(t.ynx(0,19),t.YNc(1,Y,2,2,"mat-header-cell",20),t.YNc(2,W,7,6,"mat-cell",21),t.BQk()),2&n&&t.s9C("matColumnDef",o.$implicit)}function tt(n,o){1&n&&(t.TgZ(0,"div",38),t._uU(1," DETAIL VIEW "),t.qZA())}function et(n,o){if(1&n&&(t.TgZ(0,"mat-cell",36),t.YNc(1,tt,2,0,"div",37),t.qZA()),2&n){const e=o.$implicit,i=t.oxw();t.Q6J("ngClass",e!==i.expandedElement?"de-noborder--force":""),t.uIk("colspan",i.displayedColumns.length),t.xp6(1),t.Q6J("ngIf",e===i.expandedElement)}}function nt(n,o){1&n&&t._UZ(0,"mat-header-row")}function ot(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-row",39),t.NdJ("click",function(){const c=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.toggleExpandedRow(c))}),t.qZA()}if(2&n){const e=o.$implicit,i=t.oxw();t.Q6J("ngClass",i.expandedElement===e?"highlight-row":"")}}function it(n,o){1&n&&t._UZ(0,"mat-row",40)}function at(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.AsE("",e.TKey.COMMON.EDIT," - ",e.recordToEdit.Type,"")}}function st(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.TKey.COMMON.ADD)}}function ct(n,o){1&n&&t.GkF(0)}const lt=function(n){return{$implicit:n,readonly:!1}};function rt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"de-dialog",41),t.NdJ("closeDialog",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.hideEditDetailsDialog())}),t.ynx(1,42),t.YNc(2,at,2,2,"span",2),t.YNc(3,st,2,1,"span",2),t.BQk(),t.ynx(4,43),t.YNc(5,ct,1,0,"ng-container",44),t.BQk(),t.ynx(6,45),t.TgZ(7,"button",46),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.hideEditDetailsDialog())}),t.TgZ(8,"div",47)(9,"mat-icon"),t._uU(10,"close"),t.qZA(),t.TgZ(11,"span"),t._uU(12),t.qZA()()(),t.TgZ(13,"button",48),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.saveOrUpdateTask())}),t.TgZ(14,"div",47)(15,"mat-icon"),t._uU(16,"check"),t.qZA(),t.TgZ(17,"span"),t._uU(18),t.qZA()()(),t.BQk(),t.qZA()}if(2&n){const e=t.oxw(),i=t.MAs(19);t.xp6(2),t.Q6J("ngIf",e.recordToEdit.ID),t.xp6(1),t.Q6J("ngIf",!e.recordToEdit.ID),t.xp6(2),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(6,lt,e.recordToEdit)),t.xp6(7),t.Oqu(e.TKey.COMMON.CANCEL),t.xp6(6),t.Oqu(e.recordToEdit.ID?e.TKey.COMMON.UPDATE:e.TKey.COMMON.SAVE)}}function mt(n,o){if(1&n&&(t.TgZ(0,"mat-option",55),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function dt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-form-field",56)(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"input",53),t.NdJ("ngModelChange",function(a){t.CHM(e);const c=t.oxw().$implicit;return t.KtG(c.OpenDateStr=a)}),t.qZA()()}if(2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(2),t.Oqu(i.TKey.COMMON.OPEN_DATE),t.xp6(1),t.Q6J("ngModel",e.OpenDateStr)}}function _t(n,o){if(1&n&&(t.TgZ(0,"mat-option",55),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function gt(n,o){if(1&n&&(t.TgZ(0,"mat-option",55),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function pt(n,o){if(1&n&&(t.TgZ(0,"mat-option",55),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}const g=function(n){return{readonly:n}};function ut(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-form-field",23)(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"mat-select",49),t.NdJ("ngModelChange",function(a){const l=t.CHM(e).$implicit;return t.KtG(l.Priority=a)}),t.YNc(4,mt,2,2,"mat-option",50),t.qZA()(),t.YNc(5,dt,4,2,"mat-form-field",51),t.TgZ(6,"mat-form-field",23)(7,"mat-label"),t._uU(8),t.qZA(),t.TgZ(9,"mat-select",49),t.NdJ("ngModelChange",function(a){const l=t.CHM(e).$implicit;return t.KtG(l.Type=a)}),t.YNc(10,_t,2,2,"mat-option",50),t.qZA()(),t.TgZ(11,"mat-form-field",23)(12,"mat-label"),t._uU(13),t.qZA(),t.TgZ(14,"mat-select",52),t.NdJ("ngModelChange",function(a){const l=t.CHM(e).$implicit;return t.KtG(l.AssignedToArr=a)}),t.YNc(15,gt,2,2,"mat-option",50),t.qZA()(),t.TgZ(16,"mat-form-field",23)(17,"mat-label"),t._uU(18),t.qZA(),t.TgZ(19,"textarea",53),t.NdJ("ngModelChange",function(a){const l=t.CHM(e).$implicit;return t.KtG(l.Details=a)}),t.qZA(),t.TgZ(20,"button",54),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.KtG(c.Details="")}),t.TgZ(21,"mat-icon"),t._uU(22,"close"),t.qZA()()(),t.TgZ(23,"mat-form-field",23)(24,"mat-label"),t._uU(25),t.qZA(),t.TgZ(26,"textarea",53),t.NdJ("ngModelChange",function(a){const l=t.CHM(e).$implicit;return t.KtG(l.Notes=a)}),t.qZA(),t.TgZ(27,"button",54),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.KtG(c.Notes="")}),t.TgZ(28,"mat-icon"),t._uU(29,"close"),t.qZA()()(),t.TgZ(30,"mat-form-field",23)(31,"mat-label"),t._uU(32),t.qZA(),t.TgZ(33,"mat-select",49),t.NdJ("ngModelChange",function(a){const l=t.CHM(e).$implicit;return t.KtG(l.Status=a)}),t.YNc(34,pt,2,2,"mat-option",50),t.qZA()()}if(2&n){const e=o.$implicit,i=o.readonly,a=t.oxw();t.Q6J("ngClass",t.VKq(23,g,i||!a.authService.isTasksAdmin())),t.xp6(2),t.Oqu(a.TKey.COMMON.PRIORITY),t.xp6(1),t.Q6J("ngModel",e.Priority),t.xp6(1),t.Q6J("ngForOf",a.settingsService.metadata.taskPriority),t.xp6(1),t.Q6J("ngIf",e.ID),t.xp6(1),t.Q6J("ngClass",t.VKq(25,g,i||!a.authService.isTasksAdmin())),t.xp6(2),t.Oqu(a.TKey.COMMON.TYPE),t.xp6(1),t.Q6J("ngModel",e.Type),t.xp6(1),t.Q6J("ngForOf",a.settingsService.metadata.taskType),t.xp6(1),t.Q6J("ngClass",t.VKq(27,g,i||!a.authService.isTasksAdmin())),t.xp6(2),t.Oqu(a.TKey.COMMON.ASSIGNED_TO),t.xp6(1),t.Q6J("ngModel",e.AssignedToArr),t.xp6(1),t.Q6J("ngForOf",a.loginUsers),t.xp6(1),t.Q6J("ngClass",t.VKq(29,g,i||!a.authService.isTasksAdmin())),t.xp6(2),t.Oqu(a.TKey.COMMON.DETAILS),t.xp6(1),t.Q6J("ngModel",e.Details),t.xp6(4),t.Q6J("ngClass",i?"readonly":""),t.xp6(2),t.Oqu(a.TKey.COMMON.NOTES),t.xp6(1),t.Q6J("ngModel",e.Notes),t.xp6(4),t.Q6J("ngClass",i?"readonly":""),t.xp6(2),t.Oqu(a.TKey.COMMON.STATUS),t.xp6(1),t.Q6J("ngModel",e.Status),t.xp6(1),t.Q6J("ngForOf",a.tasksStatus)}}function ft(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"de-confirmation-dialog",57),t.NdJ("onSuccess",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.deleteRecord())})("onCancel",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.recordToDelete=null)}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("title","Delete Patrol?")("content","Are you sure you want to delete task '"+e.recordToDelete.Type+"'?")}}const Tt=function(){return["expandedDetail"]},Ct=function(){return[25,50,100,150]};class _ extends x.H6{constructor(){super(...arguments),this.data=new r.by([]),this.fullData=[],this.activeTaskStatus="Open",this.taskColumns=this.settingsService.metadata.sheetsInfo?.TASKS?.cols,this.allColumns=[this.taskColumns?.TYPE?.label||"",this.taskColumns?.PRIORITY?.label||"",this.taskColumns?.OPENDATE?.label||"",this.taskColumns?.ASSIGNEDTO?.label||""],this.displayedColumns=[],this.searchText="",this.searchTextRegexp=new RegExp(""),this.cacheInfo=null,this.tasksStatus=this.settingsService.metadata.taskStatus,this.loginUsers=this.settingsService.metadata.loginUsers?.filter(o=>!o.match(/(test|service)/i))}ngOnInit(){this.filterSearch=this.filterSearch.bind(this),this.filterTaskStatus=this.filterTaskStatus.bind(this),this._subscriptions.push(this.eventService.isMobile.subscribe(()=>this.refreshDisplayedColumns())),this.settingsService.pageTitle=this.TKey.COMMON.CABLE,this.authService.isTasksAdmin()||(this.tasksStatus=this.settingsService.metadata.taskStatus?.slice(0,this.settingsService.metadata.taskStatus.length-1))}ngAfterViewInit(){this.data.paginator=this.paginator,this.refreshDisplayedColumns(),this.refreshData(!1,!0)}ngOnDestroy(){super.ngOnDestroy(),this.cacheInfo?.destroy()}refreshDisplayedColumns(){this.displayedColumns=this.authService.isTasksAdmin()?this.allColumns.slice(0,4):this.allColumns.slice(0,3),this.displayedColumns.push("ACTIONS")}hideEditDetailsDialog(){this.recordToEdit=null,this.recordToEditOrig=null}saveOrUpdateTask(){if(!this.recordToEdit)return;this.settingsService.processingText="Updating data...";const o=this.recordToEdit.clone();o.ID=o.ID||Date.now().toString(),o.OpenDate=o.getOpenCloseDate(o.OpenDate||Date.now()),o.AssignedTo=o.AssignedTo,this.recordToEditOrig?.Status!==o.Status&&"Done"===o.Status&&(o.DoneDate=o.getOpenCloseDate(Date.now())),this.apiGSheetDataService.saveOrUpdateRecord(this.settingsService.metadata.sheetsInfo?.TASKS?.label,[this.taskColumns?.ID?.label],o).subscribe({next:()=>{this.settingsService.processingText="",this.refreshData(!0)},error:e=>{this.settingsService.processingText="",this.utilService.openErrorSnackBar(e,"Close")}})}refreshData(o=!1,e=!1){this.settingsService.processingText="Refreshing data...",this.apiGSheetDataService.getSheetData(this.settingsService.metadata.sheetsInfo?.TASKS.label,h.Oo,o).pipe((0,D.b)(i=>this.getRefreshCacheInfo(`SHEET_${this.settingsService.metadata.sheetsInfo?.TASKS.label}`,this.cacheInfo).pipe((0,v.U)(a=>(this.cacheInfo=a,i))))).subscribe({next:i=>{this.settingsService.processingText="",this.fullData=i,this.initializeFilters(e)},error:()=>this.settingsService.processingText="",complete:()=>{this.recordToDelete=null,this.hideEditDetailsDialog()}})}initializeFilters(o=!1){this.onFilterChange()}onFilterChange(){this.immediateFilterChange()}filterSearch(o){return o.freeTextSearch(this.searchTextRegexp)}filterTaskStatus(o){return o.Status===this.activeTaskStatus}createRecord(){this.recordToEditOrig=null,this.recordToEdit=new h.Oo({Date:new Date,By:this.authService.Username,Status:"Open"})}editRecord(o){this.recordToEditOrig=o,this.recordToEdit=o.clone()}deleteRecord(){this.settingsService.processingText="Deleting record...",this.apiGSheetDataService.deleteRecord(this.settingsService.metadata.sheetsInfo?.TASKS?.label,[this.taskColumns?.ID?.label],this.recordToDelete).subscribe({next:()=>{this.settingsService.processingText="",this.refreshData(!0)},error:o=>{this.settingsService.processingText="",this.utilService.openErrorSnackBar(o,"Close")}})}getCellClassNames(o,e){return""}toggleExpandedRow(o){this.expandedElement=this.expandedElement===o?null:o}selectedTabChange(o){switch(o.index){case 0:default:this.activeTaskStatus="Open";break;case 1:this.activeTaskStatus="Done";break;case 2:this.activeTaskStatus="Verified"}this.immediateFilterChange()}immediateFilterChange(){let e=this.filterSearch,i=this.filterTaskStatus;this.searchText?this.searchTextRegexp=this.utilService.getFlexibleSearchTextRegexp(this.searchText):e=a=>!0,this.data.data=this.fullData.filter(e).filter(i)}static#t=this.\u0275fac=function(){let o;return function(i){return(o||(o=t.n5z(_)))(i||_)}}();static#e=this.\u0275cmp=t.Xpm({type:_,selectors:[["de-tasks-list"]],viewQuery:function(e,i){if(1&e&&t.Gf(C.NW,5),2&e){let a;t.iGM(a=t.CRH())&&(i.paginator=a.first)}},features:[t.qOj],decls:21,vars:15,consts:[["mat-stretch-tabs","true","mat-align-tabs","center",3,"selectedTabChange"],["mat-tab-label",""],[4,"ngIf"],[1,"de-f-aligncenter","de-f-justifyright","de-m-vbase","de-sm-rbase-nolast"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],[3,"cacheInfo","refreshTriggerInterval","refresh"],["matSort","","matSortActive","CUSTOMER_NAME","matSortDirection","asc","multiTemplateDataRows","",1,"mat-elevation-z8",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","expandedDetail"],["class","expanded-detail-cell",3,"ngClass",4,"matCellDef"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"ngClass","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","expanded-detail-row",4,"matRowDef","matRowDefColumns"],["pageSize","50","showFirstLastButtons","",3,"pageSizeOptions"],["classNames","customer-card-dialog",3,"closeDialog",4,"ngIf"],["taskDetailView",""],[3,"title","content","onSuccess","onCancel",4,"ngIf"],[1,"de-m-rbase"],["mat-raised-button","","color","accent",3,"click"],[3,"matColumnDef"],["mat-sort-header","",3,"ngClass",4,"matHeaderCellDef"],[3,"ngClass",4,"matCellDef"],["mat-sort-header","",3,"ngClass"],[3,"ngClass"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","mobile-cell de-sm-rsmall-nolast",4,"ngIf"],[1,"mobile-cell","de-sm-rsmall-nolast"],[3,"text"],[1,"de-f-aligncenter","de-sm-rbase-nolast"],["displayType","CALL",3,"mobile"],["displayType","WHATSAPP",3,"mobile"],["color","primary",1,"de-cursorpointer","de-m-rbase",3,"click"],["color","warn","class","de-cursorpointer",3,"click",4,"ngIf"],["color","warn",1,"de-cursorpointer",3,"click"],[1,"expanded-detail-cell",3,"ngClass"],["class","de-p-bmedium de-p-tbase de-w-full",4,"ngIf"],[1,"de-p-bmedium","de-p-tbase","de-w-full"],[3,"ngClass","click"],["mat-row","",1,"expanded-detail-row"],["classNames","customer-card-dialog",3,"closeDialog"],["de-dialog-header",""],["de-dialog-body",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["de-dialog-footer",""],["mat-raised-button","","color","warn",3,"click"],[1,"de-f-aligncenter","de-sm-rsmall-nolast"],["mat-raised-button","","color","primary",3,"click"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","readonly",4,"ngIf"],["multiple","",3,"ngModel","ngModelChange"],["matInput","","type","text",3,"ngModel","ngModelChange"],["matSuffix","","mat-icon-button","",3,"click"],[3,"value"],[1,"readonly"],[3,"title","content","onSuccess","onCancel"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-tab-group",0),t.NdJ("selectedTabChange",function(c){return i.selectedTabChange(c)}),t.TgZ(1,"mat-tab"),t.YNc(2,I,3,0,"ng-template",1),t.qZA(),t.TgZ(3,"mat-tab"),t.YNc(4,U,3,0,"ng-template",1),t.qZA(),t.YNc(5,K,2,0,"mat-tab",2),t.qZA(),t.TgZ(6,"div",3),t.YNc(7,R,4,1,"button",4),t.TgZ(8,"de-refresh-data",5),t.NdJ("refresh",function(){return i.refreshData(!0)}),t.qZA()(),t.TgZ(9,"mat-table",6),t.YNc(10,X,3,1,"ng-container",7),t.ynx(11,8),t.YNc(12,et,2,3,"mat-cell",9),t.BQk(),t.YNc(13,nt,1,0,"mat-header-row",10),t.YNc(14,ot,1,1,"mat-row",11),t.YNc(15,it,1,0,"mat-row",12),t.qZA(),t._UZ(16,"mat-paginator",13),t.YNc(17,rt,19,8,"de-dialog",14),t.YNc(18,ut,35,31,"ng-template",null,15,t.W1O),t.YNc(20,ft,1,2,"de-confirmation-dialog",16)),2&e&&(t.xp6(5),t.Q6J("ngIf",i.authService.isTasksAdmin()),t.xp6(2),t.Q6J("ngIf",i.settingsService.isOnline&&"Open"===i.activeTaskStatus),t.xp6(1),t.Q6J("cacheInfo",i.cacheInfo)("refreshTriggerInterval",4320),t.xp6(1),t.Q6J("dataSource",i.data),t.xp6(1),t.Q6J("ngForOf",i.displayedColumns),t.xp6(3),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(13,Tt)),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(14,Ct)),t.xp6(1),t.Q6J("ngIf",i.recordToEdit),t.xp6(3),t.Q6J("ngIf",i.recordToDelete))},dependencies:[w.z,y.$,A.a,N.D,P.s,d.mk,d.sg,d.O5,d.tP,d.RF,d.n9,d.ED,p.Fj,p.JJ,p.On,J.ey,O.lW,O.RK,u.KE,u.hX,u.R9,Q.Hw,E.Nt,M.YE,M.nU,C.NW,L.gD,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,f.uD,f.uX,f.SP],styles:["[_nghost-%COMP%]{display:block;padding:12px;height:100%;width:100%}",".filter-row[_ngcontent-%COMP%]   .advanced-filter-label[_ngcontent-%COMP%]{color:var(--primary);justify-content:end;margin-top:6px;margin-bottom:6px;text-decoration:underline;width:100%}mat-table[_ngcontent-%COMP%]     mat-header-row mat-header-cell:not([colspan]):last-child, mat-table[_ngcontent-%COMP%]     mat-row mat-cell:not([colspan]):last-child{max-width:90px;min-width:90px}.highlight-row[_ngcontent-%COMP%]{background-color:#f0f0f0}.select-all[_ngcontent-%COMP%]{padding:6px}.expanded-detail-row[_ngcontent-%COMP%], .expanded-detail-cell[_ngcontent-%COMP%]{min-height:0px}.collection-filter[_ngcontent-%COMP%], .pending-settlement-filter[_ngcontent-%COMP%], .location-container[_ngcontent-%COMP%]{align-items:flex-start;border:1px solid rgba(0,0,0,.38);border-radius:4px;flex-direction:column;padding:20px;position:relative}.collection-filter[_ngcontent-%COMP%] > label[_ngcontent-%COMP%], .pending-settlement-filter[_ngcontent-%COMP%] > label[_ngcontent-%COMP%], .location-container[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{background:#fafafa;color:#0009;font-size:12px;left:12px;padding:0 6px;position:absolute;top:-11px}.collection-filter[_ngcontent-%COMP%] > mat-slide-toggle[_ngcontent-%COMP%], .pending-settlement-filter[_ngcontent-%COMP%] > mat-slide-toggle[_ngcontent-%COMP%], .location-container[_ngcontent-%COMP%] > mat-slide-toggle[_ngcontent-%COMP%]{margin-bottom:16px}.collection-filter[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%], .pending-settlement-filter[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%], .location-container[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{width:100%}.location-container[_ngcontent-%COMP%]{padding-bottom:0}.mobile-cell[_ngcontent-%COMP%]{align-items:center;display:flex;flex-wrap:wrap;justify-content:center}.customer-details[_ngcontent-%COMP%]{width:100%}.customer-details[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{max-width:150px}table.customer-card[_ngcontent-%COMP%]{border-collapse:collapse;border-color:#dee2e6;display:table;margin-bottom:24px;max-width:400px;text-align:center;width:100%}table.customer-card[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#d2d8ff;font-weight:500}table.customer-card[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.customer-card[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(222,226,230);border-collapse:collapse;padding:6px}table.customer-card.full-width[_ngcontent-%COMP%], table.customer-details.full-width[_ngcontent-%COMP%]{min-width:100%}table.customer-card[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table.customer-details[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{text-align:left}table.customer-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([matinput]), table.customer-details[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([matinput]){border:0px;outline:none;width:50px}table.customer-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([matinput]):focus, table.customer-details[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([matinput]):focus{outline:none}table.customer-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([matinput]).notes, table.customer-details[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([matinput]).notes{width:200px}table.customer-card[_ngcontent-%COMP%]   input.mat-datepicker-input[_ngcontent-%COMP%], table.customer-details[_ngcontent-%COMP%]   input.mat-datepicker-input[_ngcontent-%COMP%]{width:auto}table.customer-card[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], table.customer-details[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border-color:#cacaca;border-radius:4px}  .customer-card-dialog{max-width:600px!important}"],data:{animation:[(0,m.X$)("detailExpand",[(0,m.SB)("collapsed",(0,m.oB)({height:"0px",minHeight:"0"})),(0,m.SB)("expanded",(0,m.oB)({height:"*"})),(0,m.eR)("expanded <=> collapsed",(0,m.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}})}(0,b.gn)([(0,Z.Ds)(500)],_.prototype,"onFilterChange",null);var k=s(1896);const ht=[{path:"list",component:_},{path:"**",redirectTo:"list"}];let S=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[k.Bz.forChild(ht),k.Bz]})}return n})();s(7161);let xt=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[x.nC.forChild(),S]})}return n})()}}]);