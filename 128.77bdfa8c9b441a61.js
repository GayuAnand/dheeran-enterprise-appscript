"use strict";(self.webpackChunkcap_webview=self.webpackChunkcap_webview||[]).push([[128],{2128:(zt,O,r)=>{r.r(O),r.d(O,{CableListComponent:()=>C,CableListModule:()=>Vt,CableListRoutingModule:()=>y,CustomerCardComponent:()=>S});var x=r(2300),f=r(732),t=r(5879),A=r(2099),Z=r(9653),m=r(6814),N=r(617);function F(o,l){if(1&o&&(t.ynx(0),t.TgZ(1,"tr")(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._UZ(5,"de-copyable-text",2),t.qZA()(),t.TgZ(6,"tr")(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA()(),t.BQk()),2&o){const e=t.oxw();t.xp6(3),t.hij("",e.TKey.COMMON.ID,":"),t.xp6(2),t.Q6J("text",e.customer.ID),t.xp6(3),t.hij("",e.TKey.COMMON.STB_STATUS,":"),t.xp6(2),t.Oqu(e.customer["STB Status"])}}function v(o,l){if(1&o&&(t.TgZ(0,"div",8),t._UZ(1,"de-mobile-number",9),t.TgZ(2,"div",8),t._UZ(3,"de-mobile-number",10)(4,"de-mobile-number",11),t.qZA()()),2&o){const e=l.$implicit;t.xp6(1),t.Q6J("mobile",e),t.xp6(2),t.Q6J("mobile",e),t.xp6(1),t.Q6J("mobile",e)}}function q(o,l){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"a",12)(5,"mat-icon"),t._uU(6,"location_on"),t.qZA(),t.TgZ(7,"span"),t._uU(8),t.qZA()()()()),2&o){const e=t.oxw();t.xp6(2),t.hij("",e.TKey.COMMON.LOCATION,":"),t.xp6(2),t.Q6J("href",e.geolocationService.getGoogleLocationUrl(e.customer.Latitude,e.customer.Longitude),t.LSH),t.xp6(4),t.HOy("",e.TKey.COMMON.LAT_ABBR,": ",e.customer.Latitude||0,", ",e.TKey.COMMON.LON_ABBR,": ",e.customer.Longitude||0,"")}}function J(o,l){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA()()),2&o){const e=l.$implicit,n=t.oxw();t.xp6(2),t.Oqu(e),t.xp6(2),t.Oqu(n.customer.getCollectionDateStrFormat(e)),t.xp6(2),t.Oqu(n.customer.get(e)),t.xp6(2),t.Oqu(n.customer.getSettlementDateStrFormat(e)),t.xp6(2),t.Oqu(n.customer.getNotes(e))}}let S=(()=>{class o extends x.H6{isCableAdmin(){return this.authService.hasPermission(f.v.CABLE,f._.ADMIN)}static#t=this.\u0275fac=function(){let e;return function(i){return(e||(e=t.n5z(o)))(i||o)}}();static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["de-customer-card"]],inputs:{customer:"customer"},features:[t.qOj],decls:37,vars:11,consts:[[1,"customer-details"],[4,"ngIf"],[3,"text"],[1,"mobile-row"],["class","de-f-aligncenter de-sm-rbase-nolast",4,"ngFor","ngForOf"],[1,"customer-card-wrapper"],[1,"customer-card"],[4,"ngFor","ngForOf"],[1,"de-f-aligncenter","de-sm-rbase-nolast"],["displayType","TEXT",3,"mobile"],["displayType","CALL",3,"mobile"],["displayType","WHATSAPP",3,"mobile"],["target","_blank",1,"de-f-aligncenter",3,"href"]],template:function(n,i){1&n&&(t.TgZ(0,"table",0),t.YNc(1,F,11,4,"ng-container",1),t.TgZ(2,"tr")(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"de-copyable-text",2),t.qZA()(),t.TgZ(7,"tr",3)(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t.YNc(11,v,5,3,"div",4),t.qZA()(),t.TgZ(12,"tr")(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA()(),t.TgZ(17,"tr")(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA()(),t.YNc(22,q,9,6,"tr",1),t.qZA(),t.TgZ(23,"div",5)(24,"table",6)(25,"tr")(26,"th"),t._uU(27,"Month"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"Collected"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Amount"),t.qZA(),t.TgZ(32,"th"),t._uU(33,"Settled"),t.qZA(),t.TgZ(34,"th"),t._uU(35,"Notes"),t.qZA()(),t.YNc(36,J,11,5,"tr",7),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("ngIf",i.isCableAdmin()),t.xp6(3),t.hij("",i.TKey.COMMON.STB,":"),t.xp6(2),t.Q6J("text",i.customer.STB),t.xp6(3),t.hij("",i.TKey.COMMON.MOBILE,":"),t.xp6(2),t.Q6J("ngForOf",i.customer.getMobileNumbers()),t.xp6(3),t.hij("",i.TKey.COMMON.CONNECTION_ON,":"),t.xp6(2),t.Oqu(i.customer.getConnectionDate()),t.xp6(3),t.hij("",i.TKey.COMMON.NOTES,":"),t.xp6(2),t.Oqu(i.customer["Own Notes"]||i.customer.Notes),t.xp6(1),t.Q6J("ngIf",i.customer.Latitude&&i.customer.Longitude),t.xp6(14),t.Q6J("ngForOf",i.customer.getMonthsInOrder()))},dependencies:[A.$,Z.D,m.sg,m.O5,N.Hw],styles:["[_nghost-%COMP%]{display:flex;flex-grow:1;flex-wrap:wrap;justify-content:space-between;overflow:auto}.detail-section[_ngcontent-%COMP%]{display:flex;flex-grow:1;margin-bottom:6px}.detail-section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{display:flex;font-style:italic;padding-right:6px}.detail-section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){display:flex}.customer-details[_ngcontent-%COMP%]{width:100%}.customer-details[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{line-height:24px;max-width:150px}.customer-card-wrapper[_ngcontent-%COMP%]{display:flex;flex-grow:1;justify-content:center;width:100%}table.customer-card[_ngcontent-%COMP%]{border-collapse:collapse;border-color:#dee2e6;display:table;margin-top:12px;margin-bottom:12px;max-width:400px;text-align:center;width:100%}table.customer-card[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#d2d8ff;font-weight:500}table.customer-card[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.customer-card[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(222,226,230);border-collapse:collapse;padding:6px}table.customer-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], table.customer-details[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:0px;outline:none;width:50px}table.customer-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, table.customer-details[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}table.customer-card[_ngcontent-%COMP%]   input.notes[_ngcontent-%COMP%], table.customer-details[_ngcontent-%COMP%]   input.notes[_ngcontent-%COMP%]{width:200px}"]})}return o})();var w=r(1896),P=r(7582),Q=r(6328),U=r(7398),E=r(298),L=r(3365),c=r(5313),u=r(6825),D=r(2090),K=r(1705),I=r(3969),k=r(2436),p=r(6223),B=r(3680),b=r(2296),G=r(5986),T=r(8034),M=r(9157),H=r(2032),Y=r(2599),$=r(8525);function R(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.searchText="",t.KtG(i.onFilterChange())}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function j(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"mat-option",22),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.statusFilter.onSelectionChange())}),t._uU(1),t.qZA()}if(2&o){const e=l.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function V(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"mat-option",22),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.gpayFilter.onSelectionChange())}),t._uU(1),t.qZA()}if(2&o){const e=l.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function z(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"mat-option",22),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.areaFilter.onSelectionChange())}),t._uU(1),t.qZA()}if(2&o){const e=l.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function W(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"mat-option",22),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(4);return t.KtG(i.agentsFilter.onSelectionChange())}),t._uU(1),t.qZA()}if(2&o){const e=l.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}const h=function(){return{standalone:!0}};function X(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"mat-select",3)(4,"div",4)(5,"mat-checkbox",5),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw(3);return t.KtG(a.agentsFilter.selectAll=i)})("change",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.agentsFilter.toggleSelectAll())}),t._uU(6,"Select All"),t.qZA()(),t.YNc(7,W,2,2,"mat-option",6),t.qZA()()}if(2&o){const e=t.oxw(3);t.xp6(2),t.Oqu(e.TKey.COMMON.AGENTS),t.xp6(1),t.Q6J("formControl",e.agentsFilter.control),t.xp6(2),t.Q6J("ngModel",e.agentsFilter.selectAll)("ngModelOptions",t.DdM(5,h)),t.xp6(2),t.Q6J("ngForOf",e.agentsFilter.controlOptions)}}function tt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"div",25)(1,"label"),t._uU(2,"Pending Settlement Filter"),t.qZA(),t.TgZ(3,"mat-slide-toggle",26),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.showPendingSettlement=i)})("ngModelChange",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onPendingSettlementFilterChange())}),t._uU(4),t.qZA(),t.YNc(5,X,8,6,"mat-form-field",9),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(3),t.Q6J("ngModel",e.showPendingSettlement)("ngClass",e.authService.hasPermission(e.METADATA.APPS.CABLE,e.METADATA.ROLES.ADMIN)?"":"de-nm--force"),t.xp6(1),t.AsE("",e.TKey.CUSTOMERS.SHOW_PENDING_SETTLEMENT," ",e.showPendingSettlement?"(Rs."+e.pendingSettlementAmount+"/-)":"",""),t.xp6(1),t.Q6J("ngIf",e.authService.hasPermission(e.METADATA.APPS.CABLE,e.METADATA.ROLES.ADMIN))}}function et(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"mat-option",22),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.monthsFilter.onSelectionChange())}),t._uU(1),t.qZA()}if(2&o){const e=l.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function nt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"div",27)(1,"label"),t._uU(2,"Collection Filter"),t.qZA(),t.TgZ(3,"mat-slide-toggle",28),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.showCollectedCustomers=i)})("ngModelChange",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onShowCollectedCustomersFilterChange())}),t._uU(4),t.qZA(),t.TgZ(5,"mat-form-field")(6,"mat-label"),t._uU(7),t.qZA(),t.TgZ(8,"mat-select",3)(9,"div",4)(10,"mat-checkbox",5),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.monthsFilter.selectAll=i)})("change",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.monthsFilter.toggleSelectAll())}),t._uU(11,"Select All"),t.qZA()(),t.YNc(12,et,2,2,"mat-option",6),t.qZA()()()}if(2&o){const e=t.oxw(2);t.xp6(3),t.Q6J("ngModel",e.showCollectedCustomers),t.xp6(1),t.Oqu(e.showCollectedCustomers?e.TKey.CUSTOMERS.SHOWING_COLLECTED:e.TKey.CUSTOMERS.SHOWING_PENDING_COLLECTION),t.xp6(3),t.Oqu(e.TKey.COMMON.MONTHS),t.xp6(1),t.Q6J("formControl",e.monthsFilter.control),t.xp6(2),t.Q6J("ngModel",e.monthsFilter.selectAll)("ngModelOptions",t.DdM(7,h)),t.xp6(2),t.Q6J("ngForOf",e.monthsFilter.controlOptions)}}function ot(o,l){if(1&o&&(t.ynx(0),t.YNc(1,tt,6,5,"div",23),t.YNc(2,nt,13,8,"div",24),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.showCollectedCustomers),t.xp6(1),t.Q6J("ngIf",!e.showPendingSettlement)}}function it(o,l){if(1&o&&(t.TgZ(0,"mat-header-cell",32),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.Q6J("ngClass","de-f-justifycenter"),t.xp6(1),t.Oqu("ACTIONS"===e?"":e)}}function lt(o,l){1&o&&(t.ynx(0),t.TgZ(1,"mat-icon"),t._uU(2,"toggle_on"),t.qZA(),t.BQk())}function at(o,l){if(1&o&&(t.ynx(0),t._UZ(1,"de-copyable-text",36),t.BQk()),2&o){const e=t.oxw().$implicit,n=t.oxw().$implicit;t.xp6(1),t.Q6J("text",e[n])}}function st(o,l){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw().$implicit,n=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.AsE(" ",e[n]," ",i.showPendingSettlement?"("+e.getPendingSettlement(!0,i.agentsFilter.control.value)+")":""," ")}}function rt(o,l){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-icon",37),t.NdJ("click",function(i){t.CHM(e);const a=t.oxw(2).$implicit,s=t.oxw(2);return t.KtG(s.showEditDetailsDialog(a,i))}),t._uU(2,"edit"),t.qZA(),t.BQk()}}function ct(o,l){if(1&o&&(t.ynx(0),t.YNc(1,rt,3,0,"ng-container",9),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",null==e?null:e.ID)}}function _t(o,l){if(1&o&&(t.TgZ(0,"div",40),t._UZ(1,"de-copyable-text",36),t.TgZ(2,"div",41),t._UZ(3,"de-mobile-number",42)(4,"de-mobile-number",43),t.qZA()()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("text",e),t.xp6(2),t.Q6J("mobile",e),t.xp6(1),t.Q6J("mobile",e)}}function mt(o,l){if(1&o&&(t.ynx(0),t.YNc(1,_t,5,3,"div",39),t.BQk()),2&o){const e=l.$implicit;t.xp6(1),t.Q6J("ngIf",e)}}function dt(o,l){if(1&o&&(t.ynx(0),t.YNc(1,mt,2,1,"ng-container",38),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.getMobileNumbers())}}function gt(o,l){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw().$implicit,n=t.oxw().$implicit;t.xp6(1),t.Oqu(e[n])}}function ut(o,l){if(1&o&&(t.TgZ(0,"mat-cell",32),t.ynx(1,33),t.YNc(2,lt,3,0,"ng-container",34),t.YNc(3,at,2,1,"ng-container",34),t.YNc(4,st,2,2,"ng-container",34),t.YNc(5,ct,2,1,"ng-container",34),t.YNc(6,dt,2,1,"ng-container",34),t.YNc(7,gt,2,1,"ng-container",35),t.BQk(),t.qZA()),2&o){const e=l.$implicit,n=t.oxw().$implicit,i=t.oxw();t.Q6J("ngClass",i.getCellClassNames(e,n)),t.xp6(1),t.Q6J("ngSwitch",n),t.xp6(1),t.Q6J("ngSwitchCase",null==i.customerColumns||null==i.customerColumns.STATUS?null:i.customerColumns.STATUS.label),t.xp6(1),t.Q6J("ngSwitchCase",null==i.customerColumns||null==i.customerColumns.STB?null:i.customerColumns.STB.label),t.xp6(1),t.Q6J("ngSwitchCase",null==i.customerColumns||null==i.customerColumns.NAME?null:i.customerColumns.NAME.label),t.xp6(1),t.Q6J("ngSwitchCase","ACTIONS"),t.xp6(1),t.Q6J("ngSwitchCase",null==i.customerColumns||null==i.customerColumns.MOBILE?null:i.customerColumns.MOBILE.label)}}function Ct(o,l){1&o&&(t.ynx(0,29),t.YNc(1,it,2,2,"mat-header-cell",30),t.YNc(2,ut,8,7,"mat-cell",31),t.BQk()),2&o&&t.s9C("matColumnDef",l.$implicit)}function pt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"de-customer-card",46),t.NdJ("onCustomerUpdate",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.refreshData(!0))}),t.qZA()}if(2&o){const e=t.oxw().$implicit,n=t.oxw();t.Q6J("customer",e)("@detailExpand",e==n.expandedElement?"expanded":"collapsed")}}function ht(o,l){if(1&o&&(t.TgZ(0,"mat-cell",44),t.YNc(1,pt,1,2,"de-customer-card",45),t.qZA()),2&o){const e=l.$implicit,n=t.oxw();t.Q6J("ngClass",e!==n.expandedElement?"de-noborder--force":""),t.uIk("colspan",n.displayedColumns.length),t.xp6(1),t.Q6J("ngIf",e===n.expandedElement)}}function ft(o,l){1&o&&t._UZ(0,"mat-header-row")}function xt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"mat-row",47),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.expandedElement=s.expandedElement===a?null:a)}),t.qZA()}if(2&o){const e=l.$implicit,n=t.oxw();t.Q6J("ngClass",n.expandedElement===e?"highlight-row":"")}}function bt(o,l){1&o&&t._UZ(0,"mat-row",48)}function Tt(o,l){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"input",65),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.editCustomer[a]=i)}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngModel",n.editCustomer[e])}}function Mt(o,l){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Oqu(n.editCustomerOrig.get(e))}}function Ot(o,l){1&o&&t.GkF(0)}const At=function(o,l){return{editCustomer:o,notesKey:l}};function Zt(o,l){if(1&o&&(t.ynx(0),t.YNc(1,Ot,1,0,"ng-container",66),t.BQk()),2&o){const e=t.oxw().$implicit,n=t.oxw(2),i=t.MAs(45);t.xp6(1),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.WLB(2,At,n.editCustomer,n.editCustomer.getNotesKey(e)))}}function Nt(o,l){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Oqu(n.editCustomerOrig.getNotes(e))}}function St(o,l){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.ynx(6,33),t.YNc(7,Tt,2,1,"ng-container",34),t.YNc(8,Mt,2,1,"ng-container",34),t.BQk(),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t.ynx(12,33),t.YNc(13,Zt,2,5,"ng-container",34),t.YNc(14,Nt,2,1,"ng-container",34),t.BQk(),t.qZA()()),2&o){const e=l.$implicit,n=t.oxw(2);t.xp6(2),t.Oqu(e),t.xp6(2),t.Oqu(n.editCustomer.getCollectionDateStrFormat(e)),t.xp6(2),t.Q6J("ngSwitch",n.isCableAdmin()||n.canEditMonth(e)),t.xp6(1),t.Q6J("ngSwitchCase",!0),t.xp6(1),t.Q6J("ngSwitchCase",!1),t.xp6(2),t.Oqu(n.editCustomerOrig.getSettlementDateStrFormat(e)),t.xp6(2),t.Q6J("ngSwitch",n.isCableAdmin()||n.canEditMonth(e)),t.xp6(1),t.Q6J("ngSwitchCase",!0),t.xp6(1),t.Q6J("ngSwitchCase",!1)}}function wt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.editCustomer.ID="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function Lt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.editCustomer.Name="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function yt(o,l){if(1&o&&(t.TgZ(0,"mat-option",67),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function Ft(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.editCustomer.STB="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function vt(o,l){if(1&o&&(t.TgZ(0,"mat-option",67),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function qt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.editCustomer.Mobile="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function Jt(o,l){if(1&o&&(t.TgZ(0,"mat-option",67),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.Q6J("value",e[1]),t.xp6(1),t.Oqu(e[0])}}function Pt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.editCustomer["Own Notes"]="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function Qt(o,l){1&o&&(t.TgZ(0,"mat-icon"),t._uU(1,"update"),t.qZA())}function Ut(o,l){1&o&&t._UZ(0,"de-spinner",70),2&o&&t.Q6J("size",16)}function Et(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"button",68),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.getLatLng(i.editCustomer))}),t.TgZ(1,"div",61),t.YNc(2,Qt,2,0,"mat-icon",9),t.YNc(3,Ut,1,1,"de-spinner",69),t.TgZ(4,"span"),t._uU(5,"Update Current Location"),t.qZA()()()}if(2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!e.processingLatLng),t.xp6(1),t.Q6J("ngIf",e.processingLatLng)}}function Dt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.editCustomer.Latitude="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function Kt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.editCustomer.Longitude="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}const _=function(o){return{readonly:o}},It=function(){return["Active","Deactive","INACTIVE","SUSPENDED"]},kt=function(o){return[o,"1"]},Bt=function(o){return[o,"0"]},Gt=function(o,l){return[o,l]};function Ht(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"de-dialog",49),t.NdJ("closeDialog",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.hideEditDetailsDialog())}),t.ynx(1,50),t._uU(2),t.BQk(),t.ynx(3,51),t.TgZ(4,"div")(5,"table",52)(6,"tr")(7,"th"),t._uU(8,"Month"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Collected"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Amount"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Settled"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Notes"),t.qZA()(),t.YNc(17,St,15,9,"tr",38),t.qZA(),t.TgZ(18,"p",53),t._uU(19),t.qZA(),t.TgZ(20,"mat-form-field",32)(21,"mat-label"),t._uU(22),t.qZA(),t.TgZ(23,"input",1),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.editCustomer.ID=i)}),t.qZA(),t.YNc(24,wt,3,0,"button",2),t.qZA(),t.TgZ(25,"mat-form-field",32)(26,"mat-label"),t._uU(27),t.qZA(),t.TgZ(28,"input",1),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.editCustomer.Name=i)}),t.qZA(),t.YNc(29,Lt,3,0,"button",2),t.qZA(),t.TgZ(30,"mat-form-field",32)(31,"mat-label"),t._uU(32),t.qZA(),t.TgZ(33,"mat-select",28),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.editCustomer.Area=i)}),t.YNc(34,yt,2,2,"mat-option",54),t.qZA()(),t.TgZ(35,"mat-form-field",32)(36,"mat-label"),t._uU(37),t.qZA(),t.TgZ(38,"input",1),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.editCustomer.STB=i)}),t.qZA(),t.YNc(39,Ft,3,0,"button",2),t.qZA(),t.TgZ(40,"mat-form-field",32)(41,"mat-label"),t._uU(42),t.qZA(),t.TgZ(43,"mat-select",28),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.editCustomer["STB Status"]=i)}),t.YNc(44,vt,2,2,"mat-option",54),t.qZA()(),t.TgZ(45,"mat-form-field",32)(46,"mat-label"),t._uU(47),t.qZA(),t.TgZ(48,"textarea",1),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.editCustomer.Mobile=i)}),t.qZA(),t.YNc(49,qt,3,0,"button",2),t.qZA(),t.TgZ(50,"mat-form-field",32)(51,"mat-label"),t._uU(52),t.qZA(),t.TgZ(53,"mat-select",28),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.editCustomer.GPay=i)}),t.YNc(54,Jt,2,2,"mat-option",54),t.qZA()(),t.TgZ(55,"mat-form-field",32)(56,"mat-label"),t._uU(57),t.qZA(),t.TgZ(58,"input",55),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.editCustomer["Connection On"]=i)}),t.qZA(),t._UZ(59,"mat-datepicker-toggle",56)(60,"mat-datepicker",null,57),t.qZA(),t.TgZ(62,"mat-form-field",32)(63,"mat-label"),t._uU(64),t.qZA(),t.TgZ(65,"textarea",1),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.editCustomer["Own Notes"]=i)}),t.qZA(),t.YNc(66,Pt,3,0,"button",2),t.qZA(),t.TgZ(67,"div",58)(68,"label"),t._uU(69),t.qZA(),t.YNc(70,Et,6,2,"button",59),t.TgZ(71,"a",60)(72,"div",61)(73,"mat-icon"),t._uU(74,"location_on"),t.qZA(),t.TgZ(75,"span"),t._uU(76,"Open Location"),t.qZA()()(),t.TgZ(77,"mat-form-field",32)(78,"mat-label"),t._uU(79),t.qZA(),t.TgZ(80,"input",1),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.editCustomer.Latitude=i)}),t.qZA(),t.YNc(81,Dt,3,0,"button",2),t.qZA(),t.TgZ(82,"mat-form-field",32)(83,"mat-label"),t._uU(84),t.qZA(),t.TgZ(85,"input",1),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.editCustomer.Longitude=i)}),t.qZA(),t.YNc(86,Kt,3,0,"button",2),t.qZA()()(),t.BQk(),t.ynx(87,62),t.TgZ(88,"button",63),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.hideEditDetailsDialog())}),t.TgZ(89,"div",61)(90,"mat-icon"),t._uU(91,"close"),t.qZA(),t.TgZ(92,"span"),t._uU(93),t.qZA()()(),t.TgZ(94,"button",64),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.checkUpdateCollections())}),t.TgZ(95,"div",61)(96,"mat-icon"),t._uU(97,"check"),t.qZA(),t.TgZ(98,"span"),t._uU(99),t.qZA()()(),t.BQk(),t.qZA()}if(2&o){const e=t.MAs(61),n=t.oxw();t.xp6(2),t.AsE("",n.TKey.COMMON.EDIT," - ",n.editCustomerOrig.Name,""),t.xp6(15),t.Q6J("ngForOf",n.editCustomer.getMonthsInOrder()),t.xp6(2),t.Oqu(n.TKey.COMMON.DETAILS),t.xp6(1),t.Q6J("ngClass",t.VKq(54,_,!n.isCableAdmin())),t.xp6(2),t.Oqu(n.TKey.COMMON.ID),t.xp6(1),t.Q6J("ngModel",n.editCustomer.ID),t.xp6(1),t.Q6J("ngIf",n.editCustomer.ID&&n.isCableAdmin()),t.xp6(1),t.Q6J("ngClass",t.VKq(56,_,!n.isCableAdmin())),t.xp6(2),t.Oqu(n.TKey.COMMON.NAME),t.xp6(1),t.Q6J("ngModel",n.editCustomer.Name),t.xp6(1),t.Q6J("ngIf",n.editCustomer.Name&&n.isCableAdmin()),t.xp6(1),t.Q6J("ngClass",t.VKq(58,_,!n.isCableAdmin())),t.xp6(2),t.Oqu(n.TKey.COMMON.AREA),t.xp6(1),t.Q6J("ngModel",n.editCustomer.Area),t.xp6(1),t.Q6J("ngForOf",n.areaFilter.controlOptions),t.xp6(1),t.Q6J("ngClass",t.VKq(60,_,!n.isCableAdmin())),t.xp6(2),t.Oqu(n.TKey.COMMON.STB),t.xp6(1),t.Q6J("ngModel",n.editCustomer.STB),t.xp6(1),t.Q6J("ngIf",n.editCustomer.STB&&n.isCableAdmin()),t.xp6(1),t.Q6J("ngClass",t.VKq(62,_,!n.isCableAdmin())),t.xp6(2),t.Oqu(n.TKey.COMMON.STB_STATUS),t.xp6(1),t.Q6J("ngModel",n.editCustomer["STB Status"]),t.xp6(1),t.Q6J("ngForOf",t.DdM(64,It)),t.xp6(1),t.Q6J("ngClass",t.VKq(65,_,!n.isCableAdmin())),t.xp6(2),t.Oqu(n.TKey.COMMON.MOBILE),t.xp6(1),t.Q6J("ngModel",n.editCustomer.Mobile),t.xp6(1),t.Q6J("ngIf",n.editCustomer.Mobile&&n.isCableAdmin()),t.xp6(1),t.Q6J("ngClass",t.VKq(67,_,!n.isCableAdmin())),t.xp6(2),t.Oqu(n.TKey.COMMON.GPAY),t.xp6(1),t.Q6J("ngModel",n.editCustomer.GPay),t.xp6(1),t.Q6J("ngForOf",t.WLB(73,Gt,t.VKq(69,kt,n.TKey.COMMON.YES),t.VKq(71,Bt,n.TKey.COMMON.NO))),t.xp6(1),t.Q6J("ngClass",t.VKq(76,_,!n.isCableAdmin())),t.xp6(2),t.Oqu(n.TKey.COMMON.CONNECTION_ON),t.xp6(1),t.Q6J("matDatepicker",e)("ngModel",n.editCustomer["Connection On"]),t.xp6(1),t.Q6J("for",e),t.xp6(3),t.Q6J("ngClass",t.VKq(78,_,!n.isCableAdmin())),t.xp6(2),t.Oqu(n.TKey.COMMON.NOTES),t.xp6(1),t.Q6J("ngModel",n.editCustomer["Own Notes"]),t.xp6(1),t.Q6J("ngIf",n.editCustomer["Own Notes"]&&n.isCableAdmin()),t.xp6(3),t.Oqu(n.TKey.COMMON.LOCATION),t.xp6(1),t.Q6J("ngIf",n.isCableAdmin()),t.xp6(1),t.Q6J("href",n.geolocationService.getGoogleLocationUrl(n.editCustomer.Latitude,n.editCustomer.Longitude),t.LSH),t.xp6(6),t.Q6J("ngClass",t.VKq(80,_,!n.isCableAdmin())),t.xp6(2),t.Oqu(n.TKey.COMMON.LATITUDE),t.xp6(1),t.Q6J("ngModel",n.editCustomer.Latitude),t.xp6(1),t.Q6J("ngIf",n.editCustomer.Latitude&&n.isCableAdmin()),t.xp6(1),t.Q6J("ngClass",t.VKq(82,_,!n.isCableAdmin())),t.xp6(2),t.Oqu(n.TKey.COMMON.LONGITUDE),t.xp6(1),t.Q6J("ngModel",n.editCustomer.Longitude),t.xp6(1),t.Q6J("ngIf",n.editCustomer.Longitude&&n.isCableAdmin()),t.xp6(7),t.Oqu(n.TKey.COMMON.CANCEL),t.xp6(6),t.Oqu(n.TKey.COMMON.OK)}}function Yt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"input",71),t.NdJ("ngModelChange",function(i){const a=t.CHM(e);return t.KtG(a.editCustomer[a.notesKey]=i)}),t.qZA()}2&o&&t.Q6J("ngModel",l.editCustomer[l.notesKey])}const $t=function(){return["expandedDetail"]},Rt=function(){return[25,50,100,20]};class C extends x.H6{constructor(){super(...arguments),this.data=new c.by([]),this.fullData=[],this.customerColumns=this.settingsService.metadata.sheetsInfo?.CUSTOMERS?.cols,this.allColumns=[this.customerColumns?.NAME?.label||"",this.customerColumns?.AREA?.label||"",this.customerColumns?.MOBILE?.label||"",this.customerColumns?.STB?.label||""],this.displayedColumns=[],this.searchText="",this.statusFilter=this.getNewFilterControl(["Active"],["Active","Inactive"]),this.gpayFilter=this.getNewFilterControl([],["1","0"]),this.areaFilter=this.getNewFilterControl([],[]),this.agentsFilter=this.getNewFilterControl([],[]),this.monthsFilter=this.getNewFilterControl([],[]),this.showAdvancedFilters=!1,this.showCollectedCustomers=!1,this.showPendingSettlement=!1,this.pendingSettlementAmount=0,this.cacheInfo=null,this.processingLatLng=!1}ngOnInit(){this.filterArea=this.filterArea.bind(this),this.filterGpay=this.filterGpay.bind(this),this.filterStatus=this.filterStatus.bind(this),this.filterSearch=this.filterSearch.bind(this),this.filterCollection=this.filterCollection.bind(this),this.filterPendingSettlement=this.filterPendingSettlement.bind(this),this._subscriptions.push(this.eventService.isMobile.subscribe(()=>this.refreshDisplayedColumns())),this.settingsService.pageTitle=this.TKey.COMMON.CABLE,this.geolocationService.getCurrentPosition().subscribe(l=>console.log(l))}ngAfterViewInit(){this.data.paginator=this.paginator,this.refreshDisplayedColumns(),this.refreshData(!1,!0)}ngOnDestroy(){super.ngOnDestroy(),this.cacheInfo?.destroy()}getLatLng(l){this.processingLatLng=!0,this.geolocationService.getCurrentPosition().subscribe(e=>{this.processingLatLng=!1,l.Latitude=e.coords.latitude,l.Longitude=e.coords.longitude})}refreshDisplayedColumns(){this.displayedColumns=this.allColumns.slice(0,this.settingsService.isMobile?2:4),this.displayedColumns.push("ACTIONS")}refreshData(l=!1,e=!1){this.settingsService.processingText="Refreshing data...",this.apiGSheetDataService.getSheetData(this.settingsService.metadata.sheetsInfo?.CUSTOMERS.label,D.vj,l).pipe((0,Q.b)(n=>this.getRefreshCacheInfo(`SHEET_${this.settingsService.metadata.sheetsInfo?.CUSTOMERS.label}`,this.cacheInfo).pipe((0,U.U)(i=>(this.cacheInfo=i,n))))).subscribe({next:n=>{this.settingsService.processingText="",this.fullData=n,this.initializeFilters(e)},error:()=>this.settingsService.processingText=""})}initializeFilters(l=!1){const e={},n=this.areaFilter.control.value;this.fullData.forEach(d=>e[d.Area]=!0),this.areaFilter.controlOptions=Object.keys(e),this.areaFilter.controlOptions.sort(),this.areaFilter.selectAll=!1,this.areaFilter.control.setValue(!n?.length||l?[]:n);const i=this.monthsFilter.control.value;this.monthsFilter.controlOptions=this.fullData[0]?.getMonthsInOrder()||[],this.monthsFilter.control.setValue(!i?.length||l?[]:i);let a={};const s=this.agentsFilter.control.value;this.fullData.forEach(d=>a=Object.assign(a,d.getCollectionAgents())),this.agentsFilter.controlOptions=Object.keys(a),this.agentsFilter.controlOptions.sort(),this.authService.hasPermission(this.METADATA.APPS.CABLE,this.METADATA.ROLES.ADMIN)?(this.agentsFilter.control.setValue(!s?.length||l?[]:s),this.agentsFilter.control.setValue([])):this.agentsFilter.control.setValue([this.authService.Username]),this.onFilterChange()}toggleAdvancedFilters(){this.showAdvancedFilters=!this.showAdvancedFilters,this.showPendingSettlement=!1,this.showCollectedCustomers=!1,this.monthsFilter.control.setValue([]),this.onFilterChange()}onPendingSettlementFilterChange(){this.showPendingSettlement&&(this.showCollectedCustomers=!1,this.monthsFilter.control.setValue([])),this.onFilterChange()}onShowCollectedCustomersFilterChange(){this.showCollectedCustomers&&(this.showPendingSettlement=!1,this.agentsFilter.control.setValue([])),this.onFilterChange()}onFilterChange(){const l=g=>!0;let e=this.filterArea,n=this.filterGpay,i=this.filterStatus,a=this.filterSearch,s=this.filterCollection,d=this.filterPendingSettlement;this.areaFilter._selectedObj={},(this.areaFilter.control.value||[]).forEach(g=>this.areaFilter._selectedObj[g]=!0),this.gpayFilter._selectedObj={},(this.gpayFilter.control.value||[]).forEach(g=>this.gpayFilter._selectedObj[g]=!0),this.statusFilter._selectedObj={},(this.statusFilter.control.value||[]).forEach(g=>this.statusFilter._selectedObj[g]=!0),(!this.gpayFilter.control.value?.length||(this.gpayFilter.control?.value||[]).length===this.gpayFilter.controlOptions?.length)&&(n=l),(!this.areaFilter.control.value?.length||(this.areaFilter.control?.value||[]).length===this.areaFilter.controlOptions?.length)&&(e=l),(!this.statusFilter.control.value?.length||(this.statusFilter.control?.value||[]).length===this.statusFilter.controlOptions?.length)&&(i=l),this.searchText||(a=l),(!this.monthsFilter.control.value?.length||(this.monthsFilter.control.value||[]).length===this.monthsFilter.controlOptions?.length)&&(s=l),this.pendingSettlementAmount=0,this.showPendingSettlement?s=l:d=l,this.data.data=this.fullData.filter(n).filter(e).filter(i).filter(a).filter(s).filter(d),this.showPendingSettlement&&this.data.data.forEach(g=>this.pendingSettlementAmount+=g.getPendingSettlement(!1,this.agentsFilter.control.value))}filterSearch(l){return l.freeTextSearch(this.searchText)}filterArea(l){return this.areaFilter._selectedObj[l.Area]}filterStatus(l){return this.statusFilter._selectedObj.Active&&l.isActive()||this.statusFilter._selectedObj.Inactive&&!l.isActive()}filterGpay(l){return this.gpayFilter._selectedObj[1]&&l.hasGpay()||this.gpayFilter._selectedObj[0]&&!l.hasGpay()}filterCollection(l){const e=this.monthsFilter.control.value||[];return!e.length||e.every(n=>{const i=!!l[n];return i&&this.showCollectedCustomers||!i&&!this.showCollectedCustomers})}filterPendingSettlement(l){return!this.showPendingSettlement||!!l.getPendingSettlement(!1,this.agentsFilter.control.value)}getCellClassNames(l,e){const n=e===this.customerColumns?.NAME?.label||e===this.customerColumns?.AREA?.label?"":"align-center";return`${e===this.customerColumns?.NAME?.label?l.isActive()?"success-text":"danger-text":""} ${n} ${e===this.customerColumns?.MOBILE?.label?"de-f-column":""} ${l===this.expandedElement?"de-noborder--force":""}`}isCableAdmin(){return this.authService.hasPermission(f.v.CABLE,f._.ADMIN)}canEditMonth(l){const e=this.editCustomerOrig;return!e[l]&&!e.getCollectionBy(l)&&!e.getSettlementDate(l)}checkUpdateCollections(){try{const l=this.editCustomerOrig,e=this.settingsService.getCustomerCols(),n={[e?.ID.label]:l.ID};if([e?.NAME.label,e?.STB.label,e?.STB_STATUS.label,e?.MOBILE.label,e?.GPAY.label,e?.OWN_NOTES.label,e?.CONNECTION_ON.label,e?.LATITUDE.label,e?.LONGITUDE.label].filter(s=>l[s]!=this.editCustomer[s]).forEach(s=>{n[s]=this.editCustomer[s]&&s===e?.CONNECTION_ON.label?this.editCustomer.formatDate(this.editCustomer[s]):this.editCustomer[s]}),this.editCustomer.getMonthsInOrder().forEach(s=>{this.canEditMonth(s)&&(this.editCustomer[s]||this.editCustomer.getNotes(s))?(this.editCustomer[s]&&(n[s]=this.editCustomer[s],n[this.editCustomer.getCollectionByKey(s)]=this.authService.Username,n[this.editCustomer.getCollectionDateKey(s)]=this.editCustomer.formatDate(Date.now())),n[this.editCustomer.getNotesKey(s)]=this.editCustomer.getNotes(s)||""):(this.isCableAdmin()&&this.editCustomer[s]!=l[s]||this.editCustomer.getNotes(s)!=l.getNotes(s))&&(n[s]=this.editCustomer[s],n[this.editCustomer.getNotesKey(s)]=this.editCustomer.getNotes(s)||"",this.editCustomer[s]||(n[this.editCustomer.getCollectionByKey(s)]="",n[this.editCustomer.getCollectionDateKey(s)]="",n[this.editCustomer.getSettlementToKey(s)]="",n[this.editCustomer.getSettlementDateKey(s)]=""))}),0===Object.keys(n).length)return this.hideEditDetailsDialog();const a=this.settingsService.metadata.sheetsInfo?.CUSTOMERS.label;this.settingsService.processingText=`Updating '${l?.Name}'...`,this.apiGSheetDataService.saveOrUpdateRecord(a,[this.settingsService.getCustomerCols()?.ID.label],n).subscribe({next:()=>{this.settingsService.processingText="",this.utilService.openSnackBar(`Successfully updated '${l?.Name}'`,"Close"),this.hideEditDetailsDialog(),this.refreshData(!0,!1)},error:s=>{this.settingsService.processingText="",this.utilService.openErrorSnackBar(s,"Close")}})}catch(l){this.settingsService.processingText="",this.utilService.openErrorSnackBar(l?.toString()||"Script error in submitting changes.","Close")}}showEditDetailsDialog(l,e){e?.stopPropagation(),e?.preventDefault(),this.editCustomerOrig=l,this.editCustomer=this.editCustomerOrig.clone()}hideEditDetailsDialog(){this.editCustomerOrig=null}static#t=this.\u0275fac=function(){let l;return function(n){return(l||(l=t.n5z(C)))(n||C)}}();static#e=this.\u0275cmp=t.Xpm({type:C,selectors:[["de-cable-list"]],viewQuery:function(e,n){if(1&e&&t.Gf(L.NW,5),2&e){let i;t.iGM(i=t.CRH())&&(n.paginator=i.first)}},features:[t.qOj],decls:46,vars:34,consts:[[1,"filter-row","de-p-vbase"],["matInput","","type","text",3,"ngModel","ngModelChange"],["matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],["multiple","",3,"formControl"],[1,"select-all"],[3,"ngModel","ngModelOptions","ngModelChange","change"],[3,"value","click",4,"ngFor","ngForOf"],[1,"advanced-filter-label"],[1,"de-cursorpointer",3,"click"],[4,"ngIf"],[3,"cacheInfo","refresh"],["multiTemplateDataRows","",1,"mat-elevation-z8",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","expandedDetail"],["class","expanded-detail-cell",3,"ngClass",4,"matCellDef"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"ngClass","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","expanded-detail-row",4,"matRowDef","matRowDefColumns"],["pageSize","50","showFirstLastButtons","",3,"pageSizeOptions"],["classNames","customer-card-dialog",3,"closeDialog",4,"ngIf"],["editMonthNotes",""],["matSuffix","","mat-icon-button","",3,"click"],[3,"value","click"],["class","pending-settlement-filter",4,"ngIf"],["class","collection-filter",4,"ngIf"],[1,"pending-settlement-filter"],[3,"ngModel","ngClass","ngModelChange"],[1,"collection-filter"],[3,"ngModel","ngModelChange"],[3,"matColumnDef"],[3,"ngClass",4,"matHeaderCellDef"],[3,"ngClass",4,"matCellDef"],[3,"ngClass"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"text"],["color","primary",1,"de-cursorpointer","de-m-rbase",3,"click"],[4,"ngFor","ngForOf"],["class","mobile-cell de-sm-rsmall-nolast",4,"ngIf"],[1,"mobile-cell","de-sm-rsmall-nolast"],[1,"de-f-aligncenter","de-sm-rbase-nolast"],["displayType","CALL",3,"mobile"],["displayType","WHATSAPP",3,"mobile"],[1,"expanded-detail-cell",3,"ngClass"],[3,"customer","onCustomerUpdate",4,"ngIf"],[3,"customer","onCustomerUpdate"],[3,"ngClass","click"],["mat-row","",1,"expanded-detail-row"],["classNames","customer-card-dialog",3,"closeDialog"],["de-dialog-header",""],["de-dialog-body",""],[1,"customer-card","full-width"],[1,"mat-headline-5","de-m-bmedium"],[3,"value",4,"ngFor","ngForOf"],["matInput","",3,"matDatepicker","ngModel","ngModelChange"],["matIconSuffix","",3,"for"],["picker",""],[1,"location-container"],["mat-raised-button","","color","primary","class","de-m-bmedium de-m-rbase",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","target","_blank",1,"de-m-bmedium",3,"href"],[1,"de-f-aligncenter","de-sm-rsmall-nolast"],["de-dialog-footer",""],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"],["type","number",3,"ngModel","ngModelChange"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"value"],["mat-raised-button","","color","primary",1,"de-m-bmedium","de-m-rbase",3,"click"],["color","white",3,"size",4,"ngIf"],["color","white",3,"size"],["type","string",1,"notes",3,"ngModel","ngModelChange"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"mat-form-field")(2,"mat-label"),t._uU(3),t.qZA(),t.TgZ(4,"input",1),t.NdJ("ngModelChange",function(a){return n.searchText=a})("ngModelChange",function(){return n.onFilterChange()}),t.qZA(),t.YNc(5,R,3,0,"button",2),t.qZA(),t.TgZ(6,"mat-form-field")(7,"mat-label"),t._uU(8),t.qZA(),t.TgZ(9,"mat-select",3)(10,"div",4)(11,"mat-checkbox",5),t.NdJ("ngModelChange",function(a){return n.statusFilter.selectAll=a})("change",function(){return n.statusFilter.toggleSelectAll()}),t._uU(12,"Select All"),t.qZA()(),t.YNc(13,j,2,2,"mat-option",6),t.qZA()(),t.TgZ(14,"mat-form-field")(15,"mat-label"),t._uU(16),t.qZA(),t.TgZ(17,"mat-select",3)(18,"div",4)(19,"mat-checkbox",5),t.NdJ("ngModelChange",function(a){return n.gpayFilter.selectAll=a})("change",function(){return n.gpayFilter.toggleSelectAll()}),t._uU(20,"Select All"),t.qZA()(),t.YNc(21,V,2,2,"mat-option",6),t.qZA()(),t.TgZ(22,"mat-form-field")(23,"mat-label"),t._uU(24),t.qZA(),t.TgZ(25,"mat-select",3)(26,"div",4)(27,"mat-checkbox",5),t.NdJ("ngModelChange",function(a){return n.areaFilter.selectAll=a})("change",function(){return n.areaFilter.toggleSelectAll()}),t._uU(28,"Select All"),t.qZA()(),t.YNc(29,z,2,2,"mat-option",6),t.qZA()(),t.TgZ(30,"p",7)(31,"span",8),t.NdJ("click",function(){return n.toggleAdvancedFilters()}),t._uU(32),t.qZA()(),t.YNc(33,ot,3,2,"ng-container",9),t.qZA(),t.TgZ(34,"de-refresh-data",10),t.NdJ("refresh",function(){return n.refreshData(!0)}),t.qZA(),t.TgZ(35,"mat-table",11),t.YNc(36,Ct,3,1,"ng-container",12),t.ynx(37,13),t.YNc(38,ht,2,3,"mat-cell",14),t.BQk(),t.YNc(39,ft,1,0,"mat-header-row",15),t.YNc(40,xt,1,1,"mat-row",16),t.YNc(41,bt,1,0,"mat-row",17),t.qZA(),t._UZ(42,"mat-paginator",18),t.YNc(43,Ht,100,84,"de-dialog",19),t.YNc(44,Yt,1,1,"ng-template",null,20,t.W1O)),2&e&&(t.xp6(3),t.Oqu(n.TKey.COMMON.SEARCH),t.xp6(1),t.Q6J("ngModel",n.searchText),t.xp6(1),t.Q6J("ngIf",n.searchText),t.xp6(3),t.Oqu(n.TKey.COMMON.STATUS),t.xp6(1),t.Q6J("formControl",n.statusFilter.control),t.xp6(2),t.Q6J("ngModel",n.statusFilter.selectAll)("ngModelOptions",t.DdM(29,h)),t.xp6(2),t.Q6J("ngForOf",n.statusFilter.controlOptions),t.xp6(3),t.Oqu(n.TKey.COMMON.GPAY),t.xp6(1),t.Q6J("formControl",n.gpayFilter.control),t.xp6(2),t.Q6J("ngModel",n.gpayFilter.selectAll)("ngModelOptions",t.DdM(30,h)),t.xp6(2),t.Q6J("ngForOf",n.gpayFilter.controlOptions),t.xp6(3),t.Oqu(n.TKey.COMMON.AREA),t.xp6(1),t.Q6J("formControl",n.areaFilter.control),t.xp6(2),t.Q6J("ngModel",n.areaFilter.selectAll)("ngModelOptions",t.DdM(31,h)),t.xp6(2),t.Q6J("ngForOf",n.areaFilter.controlOptions),t.xp6(3),t.Oqu(n.showAdvancedFilters?n.TKey.COMMON.HIDE_ADVANCED_FILTERS:n.TKey.COMMON.SHOW_ADVANCED_FILTERS),t.xp6(1),t.Q6J("ngIf",n.showAdvancedFilters),t.xp6(1),t.Q6J("cacheInfo",n.cacheInfo),t.xp6(1),t.Q6J("dataSource",n.data),t.xp6(1),t.Q6J("ngForOf",n.displayedColumns),t.xp6(3),t.Q6J("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(32,$t)),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(33,Rt)),t.xp6(1),t.Q6J("ngIf",n.editCustomerOrig))},dependencies:[A.$,K.a,Z.D,I.s,k.O,m.mk,m.sg,m.O5,m.tP,m.RF,m.n9,m.ED,p.Fj,p.wV,p.JJ,p.On,p.oH,B.ey,b.zs,b.lW,b.RK,G.oG,T.Mq,T.hl,T.nW,M.KE,M.hX,M.R9,N.Hw,H.Nt,Y.Rr,L.NW,$.gD,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,S],styles:["[_nghost-%COMP%]{display:block;padding:12px;height:100%;width:100%}",".filter-row[_ngcontent-%COMP%]   .advanced-filter-label[_ngcontent-%COMP%]{color:var(--primary);justify-content:end;margin-top:6px;margin-bottom:6px;text-decoration:underline;width:100%}mat-table[_ngcontent-%COMP%]     mat-header-row mat-header-cell:not([colspan]):last-child, mat-table[_ngcontent-%COMP%]     mat-row mat-cell:not([colspan]):last-child{max-width:90px;min-width:90px}.highlight-row[_ngcontent-%COMP%]{background-color:#f0f0f0}.select-all[_ngcontent-%COMP%]{padding:6px}.expanded-detail-row[_ngcontent-%COMP%], .expanded-detail-cell[_ngcontent-%COMP%]{min-height:0px}.collection-filter[_ngcontent-%COMP%], .pending-settlement-filter[_ngcontent-%COMP%], .location-container[_ngcontent-%COMP%]{align-items:flex-start;border:1px solid rgba(0,0,0,.38);border-radius:4px;flex-direction:column;padding:20px;position:relative}.collection-filter[_ngcontent-%COMP%] > label[_ngcontent-%COMP%], .pending-settlement-filter[_ngcontent-%COMP%] > label[_ngcontent-%COMP%], .location-container[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{background:#fafafa;color:#0009;font-size:12px;left:12px;padding:0 6px;position:absolute;top:-11px}.collection-filter[_ngcontent-%COMP%] > mat-slide-toggle[_ngcontent-%COMP%], .pending-settlement-filter[_ngcontent-%COMP%] > mat-slide-toggle[_ngcontent-%COMP%], .location-container[_ngcontent-%COMP%] > mat-slide-toggle[_ngcontent-%COMP%]{margin-bottom:16px}.collection-filter[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%], .pending-settlement-filter[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%], .location-container[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{width:100%}.location-container[_ngcontent-%COMP%]{padding-bottom:0}.mobile-cell[_ngcontent-%COMP%]{align-items:center;display:flex;flex-wrap:wrap;justify-content:center}.customer-details[_ngcontent-%COMP%]{width:100%}.customer-details[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{max-width:150px}table.customer-card[_ngcontent-%COMP%]{border-collapse:collapse;border-color:#dee2e6;display:table;margin-bottom:24px;max-width:400px;text-align:center;width:100%}table.customer-card[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#d2d8ff;font-weight:500}table.customer-card[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.customer-card[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(222,226,230);border-collapse:collapse;padding:6px}table.customer-card.full-width[_ngcontent-%COMP%], table.customer-details.full-width[_ngcontent-%COMP%]{min-width:100%}table.customer-card[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table.customer-details[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{text-align:left}table.customer-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([matinput]), table.customer-details[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([matinput]){border:0px;outline:none;width:50px}table.customer-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([matinput]):focus, table.customer-details[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([matinput]):focus{outline:none}table.customer-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([matinput]).notes, table.customer-details[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([matinput]).notes{width:200px}table.customer-card[_ngcontent-%COMP%]   input.mat-datepicker-input[_ngcontent-%COMP%], table.customer-details[_ngcontent-%COMP%]   input.mat-datepicker-input[_ngcontent-%COMP%]{width:auto}table.customer-card[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], table.customer-details[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border-color:#cacaca;border-radius:4px}  .customer-card-dialog{max-width:600px!important}"],data:{animation:[(0,u.X$)("detailExpand",[(0,u.SB)("collapsed",(0,u.oB)({height:"0px",minHeight:"0"})),(0,u.SB)("expanded",(0,u.oB)({height:"*"})),(0,u.eR)("expanded <=> collapsed",(0,u.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}})}(0,P.gn)([(0,E.Ds)(500)],C.prototype,"onFilterChange",null);const jt=[{path:"",component:C},{path:"**",redirectTo:""}];let y=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[w.Bz.forChild(jt),w.Bz]})}return o})();r(4122);let Vt=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[x.nC.forChild(),y]})}return o})()}}]);