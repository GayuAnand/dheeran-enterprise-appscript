"use strict";(self.webpackChunkcap_webview=self.webpackChunkcap_webview||[]).push([[592],{3969:(g,m,i)=>{i.d(m,{s:()=>f});var s=i(5879),c=i(617),u=i(6814);let f=(()=>{class l{constructor(){this.refresh=new s.vpe}static#t=this.\u0275fac=function(e){return new(e||l)};static#e=this.\u0275cmp=s.Xpm({type:l,selectors:[["de-refresh-data"]],inputs:{cacheInfo:"cacheInfo"},outputs:{refresh:"refresh"},decls:5,vars:3,consts:[[1,"italic-text","mat-subtitle-2","de-m-rsmall"],[1,"de-cursorpointer",3,"click"]],template:function(e,r){1&e&&(s.TgZ(0,"span",0),s._uU(1),s.ALo(2,"async"),s.qZA(),s.TgZ(3,"mat-icon",1),s.NdJ("click",function(){return r.refresh.emit()}),s._uU(4,"refresh"),s.qZA()),2&e&&(s.xp6(1),s.hij("Last updated: ",s.lcZ(2,1,null==r.cacheInfo?null:r.cacheInfo.observable),""))},dependencies:[c.Hw,u.Ov],styles:["[_nghost-%COMP%]{align-items:center;color:gray;display:flex;justify-content:flex-end;margin-bottom:6px}"]})}return l})()},2090:(g,m,i)=>{i.d(m,{gq:()=>u,vj:()=>f,zF:()=>l});var s=i(6676),c=i.n(s);class u{constructor(t){Object.keys(t||{}).forEach(e=>this[e]=t[e])}formatDate(t){return u.formatDate(t)}getMomentDate(t){return c()(t)}getDateObj(t){return this.getMomentDate(t).toDate()}clone(){return new(Object.getPrototypeOf(this).constructor)(JSON.parse(JSON.stringify(this)))}static formatDate(t){const e=c()(t);return e.isValid()?e.format("DD MMM YY"):t}}class f extends u{get(t){return this[t]}isActive(){return"Inactive"!==this.Status}getMobileNumbers(){return(this.Mobile||"").split(/\s+/)}freeTextSearch(t=""){return`${this.Name||""} ${this.Mobile||""} ${this.STB||""} ${this["Own Notes"]||""} ${this.Notes||""}`.toLowerCase().indexOf(t.toLowerCase())>=0}getMonthsInOrder(){if(this._monthsOrder)return this._monthsOrder;let t=Object.keys(this).filter(e=>c()(e).isValid()).map(e=>c()(e).toDate().getTime());return t.sort(),this._monthsOrder=t.map(e=>c()(e).format("MMMYYYY")),this._monthsOrder}getPendingSettlement(t=!1){const e=this.getMonthsInOrder().filter(r=>this[r]&&this.getCollectionDate(r)&&!this.getSettlementDate(r)).reduce((r,o)=>r+(parseInt(this[o]||"0")||0),0);return t?`Rs.${e}/-`:e}getConnectionDate(t=!0){return this.formatDate(this["Connection On"]||"")}getCollectionDate(t){return this.formatDate(this[`${t} Collection Date`])}getSettlementDate(t){return this.formatDate(this[`${t} Settlement Date`])}getNotes(t){return this[`${t} Notes`]}}class l extends u{constructor(t){super(t)}getPatrolDateStr(){return this.formatDate(this.Date)}freeTextSearch(t=""){return`${this.Location||""} ${this.Route||""} ${this.WorkType||""}`.toLowerCase().indexOf(t.toLowerCase())>=0}}},298:(g,m)=>{function c(t,e,r,o){var n={timer:void 0,lastArgs:[]},a=function(){for(var h=this,v=[],d=0;d<arguments.length;d++)v[d]=arguments[d];n.lastArgs=v,n.timer?clearTimeout(n.timer):e&&r.apply(this,n.lastArgs),n.timer=setTimeout(function(){e||r.apply(h,n.lastArgs),n.timer=void 0},t)};return o&&(a=a.bind(o)),a.options=n,a}function l(t,e){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];if(0===r.length)throw new Error("function applied debounce decorator should be a method");if(1===r.length)throw new Error("method applied debounce decorator should have valid name");var n=r[0],a=r[1],h=3===r.length&&r[2]?r[2]:Object.getOwnPropertyDescriptor(n,a);if(h)return function f(t,e,r){return r.value=c(t,e,r.value),r}(t,e,h);!function u(t,e,r,o){var n;Object.defineProperty(r,o,{configurable:!0,enumerable:!1,get:function(){return n},set:function(a){n=c(t,e,a,this)}})}(t,e,n,a)}m.Ds=function p(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=500,o=!1;if(t.length&&("number"==typeof t[0]||"object"==typeof t[0]&&void 0!==t[0].leading)){"number"==typeof t[0]&&(r=t[0]);var n=void 0;return"object"==typeof t[0]&&void 0!==t[0].leading&&(n=t[0]),1<t.length&&"object"==typeof t[1]&&void 0!==t[1].leading&&(n=t[1]),n&&(o=n.leading),function(){for(var a=[],h=0;h<arguments.length;h++)a[h]=arguments[h];return l.apply(void 0,[r,o].concat(a))}}return l.apply(void 0,[r,o].concat(t))}}}]);