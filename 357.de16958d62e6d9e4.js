"use strict";(self.webpackChunkcap_webview=self.webpackChunkcap_webview||[]).push([[357],{2357:(j,g,i)=>{i.r(g),i.d(g,{CableListComponent:()=>d,CableListModule:()=>U,CableListRoutingModule:()=>b});var C=i(1896),m=i(6223),p=i(3365),c=i(5313),f=i(2104),t=i(5879),u=i(6814),A=i(2296),S=i(5986),h=i(9157),x=i(617),O=i(2032),v=i(8525),T=i(3680);function M(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.searchText="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function w(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-option",14),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.onStatusSelectionChange())}),t._uU(1),t.qZA()}if(2&n){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function F(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-option",14),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.onAreaSelectionChange())}),t._uU(1),t.qZA()}if(2&n){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function L(n,a){if(1&n&&(t.TgZ(0,"mat-header-cell",18),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.Q6J("ngClass","de-f-justifycenter"),t.xp6(1),t.Oqu(e)}}function Z(n,a){1&n&&(t.ynx(0),t.TgZ(1,"mat-icon"),t._uU(2,"toggle_on"),t.qZA(),t.BQk())}function y(n,a){if(1&n&&(t.TgZ(0,"a",23),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.MGl("href","tel:",e,"",t.LSH),t.xp6(1),t.Oqu(e)}}function J(n,a){if(1&n&&(t.ynx(0),t.YNc(1,y,2,2,"a",22),t.BQk()),2&n){const e=t.oxw().$implicit,o=t.oxw().$implicit,l=t.oxw();t.xp6(1),t.Q6J("ngForOf",l.getMobileNumbers(e[o]))}}function N(n,a){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw().$implicit,o=t.oxw().$implicit;t.xp6(1),t.Oqu(e[o])}}function Q(n,a){if(1&n&&(t.TgZ(0,"mat-cell",18),t.ynx(1,19),t.YNc(2,Z,3,0,"ng-container",20),t.YNc(3,J,2,1,"ng-container",20),t.YNc(4,N,2,1,"ng-container",21),t.BQk(),t.qZA()),2&n){const e=a.$implicit,o=t.oxw().$implicit,l=t.oxw();let s,r;t.Q6J("ngClass",l.getCellClassNames(e,o)),t.xp6(1),t.Q6J("ngSwitch",o),t.xp6(1),t.Q6J("ngSwitchCase",null==(s=l.settingsService.getCustomerCols())||null==s.STATUS?null:s.STATUS.label),t.xp6(1),t.Q6J("ngSwitchCase",null==(r=l.settingsService.getCustomerCols())||null==r.MOBILE?null:r.MOBILE.label)}}function D(n,a){1&n&&(t.ynx(0,15),t.YNc(1,L,2,2,"mat-header-cell",16),t.YNc(2,Q,5,4,"mat-cell",17),t.BQk()),2&n&&t.s9C("matColumnDef",a.$implicit)}function k(n,a){1&n&&t._UZ(0,"mat-header-row")}function E(n,a){1&n&&t._UZ(0,"mat-row")}const _=function(){return{standalone:!0}},$=function(){return[25,50,100,20]};let d=(()=>{class n extends f.H6{constructor(){super(...arguments),this.data=new c.by([]),this.fullData=[],this.displayedColumns=[this.settingsService.getCustomerCols()?.NAME?.label,this.settingsService.getCustomerCols()?.AREA?.label,this.settingsService.getCustomerCols()?.MOBILE?.label],this.searchText="",this.statusControl=new m.NI(["Active"]),this.statusControlOptions=["Active","Inactive"],this.selectAllStatus=!1,this.areaControl=new m.NI([]),this.areaControlOptions=[],this.selectAllArea=!1,this._selectedStatusObj={},this._selectedAreaObj={}}ngOnInit(){this.settingsService.pageTitle=this.TKey.COMMON.CABLE}ngAfterViewInit(){this.data.paginator=this.paginator,this.apiGSheetDataService.getSheetData(this.settingsService.metadata.sheetsInfo?.CUSTOMERS.label).subscribe(e=>{this.fullData=e,this.initializeFilters()})}initializeFilters(){const e={};this.fullData.forEach(o=>e[o.Area]=!0),this.areaControlOptions=Object.keys(e),this.areaControlOptions.sort(),this.areaControl.setValue(this.areaControlOptions.slice()),this.selectAllArea=!0,this.onFilterChange()}onFilterChange(){const e=r=>!0;let o=this.checkAreaFilter.bind(this),l=this.checkStatusFilter.bind(this),s=this.checkSearchFilter.bind(this);this._selectedAreaObj={},(this.areaControl.value||[]).forEach(r=>this._selectedAreaObj[r]=!0),this._selectedStatusObj={},(this.statusControl.value||[]).forEach(r=>this._selectedStatusObj[r]=!0),(this.areaControl.value||[]).length===this.areaControlOptions?.length&&(o=e),(this.statusControl.value||[]).length===this.statusControlOptions?.length&&(l=e),this.searchText||(s=e),this.data.data=this.fullData.filter(o).filter(l).filter(s)}checkSearchFilter(e){return`${e.Name||""} ${e.Mobile||""} ${e.STB||""} ${e["Own Notes"]||""} ${e.Notes||""}`.toLowerCase().indexOf(this.searchText.toLowerCase())>=0}checkAreaFilter(e){return this._selectedAreaObj[e.Area]}checkStatusFilter(e){return this._selectedStatusObj.Active&&e.isActive()||this._selectedStatusObj.Inactive&&!e.isActive()}toggleAllAreaSelection(){this.areaControl.setValue(this.selectAllArea?this.areaControlOptions.slice():[]),this.onFilterChange()}onAreaSelectionChange(){this.selectAllArea=this.areaControl.value?.length===this.areaControlOptions?.length,this.onFilterChange()}toggleAllStatusSelection(){this.statusControl.setValue(this.selectAllStatus?this.statusControlOptions.slice():[]),this.onFilterChange()}onStatusSelectionChange(){this.selectAllStatus=this.statusControl.value?.length===this.statusControlOptions?.length,this.onFilterChange()}getCellClassNames(e,o){const l=o===this.settingsService.getCustomerCols()?.NAME?.label||o===this.settingsService.getCustomerCols()?.AREA?.label?"":"align-center";return`${o===this.settingsService.getCustomerCols()?.NAME?.label?e.isActive()?"bold-text success-text":"bold-text danger-text":""} ${l} ${o===this.settingsService.getCustomerCols()?.MOBILE?.label?"de-f-column":""}`}getMobileNumbers(e){return(e||"").split(/\s+/)}static#t=this.\u0275fac=function(){let e;return function(l){return(e||(e=t.n5z(n)))(l||n)}}();static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["de-cable-list"]],viewQuery:function(o,l){if(1&o&&t.Gf(p.NW,5),2&o){let s;t.iGM(s=t.CRH())&&(l.paginator=s.first)}},features:[t.qOj],decls:27,vars:19,consts:[[1,"filter-row","de-p-tbase"],[1,"example-form-field"],["matInput","","type","text",3,"ngModel","ngModelChange"],["matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],["multiple","",3,"formControl"],[1,"select-all"],[3,"ngModel","ngModelOptions","ngModelChange","change"],[3,"value","click",4,"ngFor","ngForOf"],[1,"mat-elevation-z8",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],["pageSize","50","showFirstLastButtons","",3,"pageSizeOptions"],["matSuffix","","mat-icon-button","",3,"click"],[3,"value","click"],[3,"matColumnDef"],[3,"ngClass",4,"matHeaderCellDef"],[3,"ngClass",4,"matCellDef"],[3,"ngClass"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"href",4,"ngFor","ngForOf"],[3,"href"]],template:function(o,l){1&o&&(t.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),t._uU(3,"Search"),t.qZA(),t.TgZ(4,"input",2),t.NdJ("ngModelChange",function(r){return l.searchText=r})("ngModelChange",function(){return l.onFilterChange()}),t.qZA(),t.YNc(5,M,3,0,"button",3),t.qZA(),t.TgZ(6,"mat-form-field")(7,"mat-label"),t._uU(8,"Status"),t.qZA(),t.TgZ(9,"mat-select",4)(10,"div",5)(11,"mat-checkbox",6),t.NdJ("ngModelChange",function(r){return l.selectAllStatus=r})("change",function(){return l.toggleAllStatusSelection()}),t._uU(12,"Select All"),t.qZA()(),t.YNc(13,w,2,2,"mat-option",7),t.qZA()(),t.TgZ(14,"mat-form-field")(15,"mat-label"),t._uU(16,"Area"),t.qZA(),t.TgZ(17,"mat-select",4)(18,"div",5)(19,"mat-checkbox",6),t.NdJ("ngModelChange",function(r){return l.selectAllArea=r})("change",function(){return l.toggleAllAreaSelection()}),t._uU(20,"Select All"),t.qZA()(),t.YNc(21,F,2,2,"mat-option",7),t.qZA()()(),t.TgZ(22,"mat-table",8),t.YNc(23,D,3,1,"ng-container",9),t.YNc(24,k,1,0,"mat-header-row",10),t.YNc(25,E,1,0,"mat-row",11),t.qZA(),t._UZ(26,"mat-paginator",12)),2&o&&(t.xp6(4),t.Q6J("ngModel",l.searchText),t.xp6(1),t.Q6J("ngIf",l.searchText),t.xp6(4),t.Q6J("formControl",l.statusControl),t.xp6(2),t.Q6J("ngModel",l.selectAllStatus)("ngModelOptions",t.DdM(16,_)),t.xp6(2),t.Q6J("ngForOf",l.statusControlOptions),t.xp6(4),t.Q6J("formControl",l.areaControl),t.xp6(2),t.Q6J("ngModel",l.selectAllArea)("ngModelOptions",t.DdM(17,_)),t.xp6(2),t.Q6J("ngForOf",l.areaControlOptions),t.xp6(1),t.Q6J("dataSource",l.data),t.xp6(1),t.Q6J("ngForOf",l.displayedColumns),t.xp6(1),t.Q6J("matHeaderRowDef",l.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",l.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(18,$)))},dependencies:[u.mk,u.sg,u.O5,u.RF,u.n9,u.ED,m.Fj,m.JJ,m.On,m.oH,A.RK,S.oG,h.KE,h.hX,h.R9,x.Hw,O.Nt,p.NW,v.gD,T.ey,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk],styles:["[_nghost-%COMP%]{display:block;padding:12px}",".filter-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-grow:1;flex-wrap:wrap}.filter-row[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:flex;flex-grow:1;margin:6px;min-width:180px}.select-all[_ngcontent-%COMP%]{padding:6px}"]})}return n})();const B=[{path:"",component:d},{path:"**",redirectTo:""}];let b=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[C.Bz.forChild(B),C.Bz]})}return n})();i(4163);let U=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[f.nC.forChild(),b]})}return n})()}}]);