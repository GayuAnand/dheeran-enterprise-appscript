"use strict";(self.webpackChunkcap_webview=self.webpackChunkcap_webview||[]).push([[234],{2234:(V,y,r)=>{r.r(y),r.d(y,{CableListComponent:()=>v,CableListRoutingModule:()=>j,CableLocationComponent:()=>G,CableModule:()=>Ue,CableService:()=>q,CableStatisticsComponent:()=>$,CustomerCardComponent:()=>Y});var J=r(7582),Z=r(8433),O=r(6328),M=r(7398),L=r(298),F=r(3365),c=r(5313),u=r(6825),m=r(7848),_=r(2300),t=r(5879),d=r(1896),f=r(8645),U=r(7715),N=r(1631),z=r(4716),P=r(4298);let q=(()=>{class i{get customerIdLabel(){return this.settingsService.getCustomerCols()?.ID.label}get customerSheetName(){return this.settingsService.metadata.sheetsInfo?.CUSTOMERS.label}get nklCustomerSheetName(){return this.settingsService.metadata.sheetsInfo?.NKLCUSTOMERS.label}constructor(e,n,o,a){this.utilService=e,this.settingsService=n,this.storageService=o,this.apiGSheetDataService=a,this.offlineDataUpdated$=new f.x}getCustomerSheetName(e=!1){return e?this.nklCustomerSheetName:this.customerSheetName}saveCollectionUpdates(e,n=!1,o){this.apiGSheetDataService.saveOrUpdateRecord(this.getCustomerSheetName(n),[this.customerIdLabel],e).subscribe({next:()=>{o()},error:a=>{o(a),this.utilService.openErrorSnackBar(a,"Close")}})}saveOfflineUpdate(e,n=!1){this.storageService.updateCableOfflineData(e,this.customerIdLabel,!1,n).subscribe({next:o=>{this.utilService.openSnackBar(`Successfully saved '${e?.Name}' to offline data.`,"Close")},error:o=>{this.utilService.openErrorSnackBar(`Error in saving '${e?.Name}' to offline data. ERROR: ${o}.`,"Close")}})}syncOfflineUpdates(e=!1){let n=[];this.storageService.getCableOfflieData(e).pipe((0,O.b)(o=>(n=o||[],(0,U.D)(o).pipe((0,N.z)(a=>this.apiGSheetDataService.saveOrUpdateRecord(this.getCustomerSheetName(e),[this.customerIdLabel],a).pipe((0,M.U)(s=>{const g=n.findIndex(h=>h[this.customerIdLabel]===s[this.customerIdLabel]);return g>=0&&n.splice(g,1),s})),1)))),(0,O.b)(o=>this.storageService.updateCableOfflineData(n,this.customerIdLabel,!0,e).pipe((0,M.U)(()=>(this.offlineDataUpdated$.next(!0),o)))),(0,z.x)(()=>this.apiGSheetDataService.getSheetData(this.getCustomerSheetName(e),m.vj,!0).subscribe())).subscribe({next:o=>{this.utilService.openSnackBar(`Successfully synced offline updates for '${o?.Name}'.`)},error:o=>this.utilService.openErrorSnackBar(`Error in syncing offline changes. ERROR: '${o}'.`,"Close"),complete:()=>{this.storageService.updateCableOfflineData(n,this.customerIdLabel,!0,e)}})}static#t=this.\u0275fac=function(n){return new(n||i)(t.LFG(_.fK),t.LFG(_.gb),t.LFG(P.rQ),t.LFG(P.SR))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac})}return i})();var W=r(7917),k=r(2099),X=r(1705),Q=r(4091),K=r(9653),B=r(3969),tt=r(2436),b=r(6814),A=r(6223),H=r(3680),T=r(2296),R=r(9488),et=r(5986),E=r(8034),S=r(9157),D=r(617),nt=r(2032),ot=r(2599),I=r(8525);const it=function(){return{height:"250px",width:"100%"}};let G=(()=>{class i extends _.H6{constructor(){super(...arguments),this.mapOptions={},this.markerClusterData=[]}ngOnChanges(){this.mapOptions=this.customer?.hasLocationInfo()?{layers:[_.F1[_.VX.SATELLITE]],center:(0,Z.latLng)(this.customer.getLatitudeAsNum(),this.customer.getLongitudeAsNum()),zoomControl:!0,zoom:17,maxZoom:19}:{},this.markerClusterData=[(0,Z.marker)([this.customer.getLatitudeAsNum(),this.customer.getLongitudeAsNum()])]}static#t=this.\u0275fac=function(){let e;return function(o){return(e||(e=t.n5z(i)))(o||i)}}();static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["de-cable-location"]],inputs:{customer:"customer"},features:[t.qOj,t.TTD],decls:1,vars:4,consts:[[3,"options","markerClusterData","styles"]],template:function(n,o){1&n&&t._UZ(0,"de-map",0),2&n&&t.Q6J("options",o.mapOptions)("markerClusterData",o.markerClusterData)("styles",t.DdM(3,it))},dependencies:[Q.Gd]})}return i})();function lt(i,l){if(1&i&&(t.ynx(0),t.TgZ(1,"tr")(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._UZ(5,"de-copyable-text",3),t.qZA()(),t.TgZ(6,"tr")(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA()(),t.BQk()),2&i){const e=t.oxw();t.xp6(3),t.hij("",e.TKey.COMMON.ID,":"),t.xp6(2),t.Q6J("text",e.customer.ID),t.xp6(3),t.hij("",e.TKey.COMMON.STB_STATUS,":"),t.xp6(2),t.Oqu(e.customer["STB Status"])}}function at(i,l){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-icon",13),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.utilService.tactvActivation(o.customer))}),t._uU(2,"open_in_new"),t.qZA(),t.BQk()}}function st(i,l){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-icon",14),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.utilService.gtplActivation(o.customer,!0))}),t._uU(2,"desktop_windows"),t.qZA(),t.TgZ(3,"mat-icon",15),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.utilService.gtplActivation(o.customer,!1))}),t._uU(4,"desktop_access_disabled"),t.qZA(),t.BQk()}}function rt(i,l){if(1&i&&t._UZ(0,"de-mobile-number",21),2&i){const e=t.oxw().$implicit,n=t.oxw();t.Q6J("mobile",e)("message",n.customer.getSmsReminderText())}}function ct(i,l){if(1&i&&t._UZ(0,"de-mobile-number",22),2&i){const e=t.oxw().$implicit,n=t.oxw();t.Q6J("mobile",e)("message",n.customer.getReminderText())}}function _t(i,l){if(1&i&&(t.TgZ(0,"div",2),t._UZ(1,"de-mobile-number",16),t.TgZ(2,"div",2),t._UZ(3,"de-mobile-number",17),t.YNc(4,rt,1,2,"de-mobile-number",18),t._UZ(5,"de-mobile-number",19),t.YNc(6,ct,1,2,"de-mobile-number",20),t.qZA()()),2&i){const e=l.$implicit,n=t.oxw();t.xp6(1),t.Q6J("mobile",e),t.xp6(2),t.Q6J("mobile",e),t.xp6(1),t.Q6J("ngIf",n.settingsService.isNative&&n.authService.isCableAdmin()&&n.customer.hasPendingPayment()),t.xp6(1),t.Q6J("mobile",e),t.xp6(1),t.Q6J("ngIf",n.authService.isCableAdmin()&&n.customer.hasPendingPayment())}}function mt(i,l){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"div",23)(5,"a",24)(6,"mat-icon"),t._uU(7,"location_on"),t.qZA()(),t._UZ(8,"de-copyable-text",25),t.qZA()()()),2&i){const e=t.oxw();t.xp6(2),t.hij("",e.TKey.COMMON.LOCATION,":"),t.xp6(3),t.Q6J("href",e.geolocationService.getGoogleLocationUrl(e.customer.Latitude,e.customer.Longitude),t.LSH),t.xp6(3),t.FAE("displayText","",e.TKey.COMMON.LAT_ABBR,": ",e.customer.Latitude||0,", ",e.TKey.COMMON.LON_ABBR,": ",e.customer.Longitude||0,""),t.Q6J("text",e.geolocationService.getGoogleLocationUrl(e.customer.Latitude,e.customer.Longitude))}}function ut(i,l){if(1&i&&(t.TgZ(0,"tr")(1,"td",26),t._UZ(2,"de-cable-location",27),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("customer",e.customer)}}function gt(i,l){if(1&i&&(t.TgZ(0,"a",30),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.Q6J("href",e.customer.upiUrl(),t.LSH),t.xp6(1),t.Oqu(e.TKey.COMMON.PAY_BILL)}}function dt(i,l){if(1&i&&(t.TgZ(0,"tr")(1,"td",26),t._UZ(2,"img",28),t.YNc(3,gt,2,2,"a",29),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("src",e.customer.qrCodeUrl(),t.LSH),t.xp6(1),t.Q6J("ngIf",e.settingsService.getPaymentInfo().isMerchant)}}function pt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.showMiniMap=!o.showMiniMap)}),t.TgZ(1,"mat-icon",8),t._uU(2),t.qZA(),t._uU(3),t.qZA()}if(2&i){const e=t.oxw();t.xp6(2),t.Oqu(e.showMiniMap?"location_off":"location_on"),t.xp6(1),t.hij(" ",e.TKey.COMMON.MAP_VIEW," ")}}function Ct(i,l){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA()()),2&i){const e=l.$implicit,n=t.oxw();t.xp6(2),t.Oqu(e),t.xp6(2),t.Oqu(n.customer.getCollectionDateStrFormat(e)),t.xp6(2),t.Oqu(n.customer.get(e)),t.xp6(2),t.Oqu(n.customer.getSettlementDateStrFormat(e)),t.xp6(2),t.Oqu(n.customer.getNotes(e))}}let Y=(()=>{class i extends _.H6{constructor(){super(...arguments),this.nklAccount=!1,this.showPaymentQrCode=!1,this.showMiniMap=!1}isCableAdmin(){return this.nklAccount?this.authService.isNklCableAdmin():this.authService.isCableAdmin()}static#t=this.\u0275fac=function(){let e;return function(o){return(e||(e=t.n5z(i)))(o||i)}}();static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["de-customer-card"]],inputs:{customer:"customer",nklAccount:"nklAccount"},features:[t.qOj],decls:47,vars:17,consts:[[1,"customer-details"],[4,"ngIf"],[1,"de-f-aligncenter","de-sm-rbase-nolast"],[3,"text"],[1,"mobile-row"],["class","de-f-aligncenter de-sm-rbase-nolast",4,"ngFor","ngForOf"],[1,"de-f","de-sm-rbase-nolast"],["mat-stroked-button","","color","primary",1,"de-m-vbase",3,"click"],["matPrefix",""],["mat-stroked-button","","color","primary","class","de-m-vbase",3,"click",4,"ngIf"],[1,"customer-card-wrapper"],[1,"customer-card"],[4,"ngFor","ngForOf"],[1,"primary-text","de-cursorpointer",3,"click"],[1,"success-text","bold-text","de-cursorpointer",3,"click"],[1,"danger-text","bold-text","de-cursorpointer",3,"click"],["displayType","TEXT",3,"mobile"],["displayType","CALL",3,"mobile"],["displayType","SMS_REMINDER",3,"mobile","message",4,"ngIf"],["displayType","WHATSAPP",3,"mobile"],["displayType","WHATSAPP_REMINDER",3,"mobile","message",4,"ngIf"],["displayType","SMS_REMINDER",3,"mobile","message"],["displayType","WHATSAPP_REMINDER",3,"mobile","message"],[1,"de-f-aligncenter"],["target","_blank",1,"de-if-aligncenter",3,"href"],[3,"text","displayText"],["colspan","2"],[3,"customer"],[1,"de-block",3,"src"],["mat-raised-button","","target","_blank",3,"href",4,"ngIf"],["mat-raised-button","","target","_blank",3,"href"]],template:function(n,o){1&n&&(t.TgZ(0,"table",0),t.YNc(1,lt,11,4,"ng-container",1),t.TgZ(2,"tr")(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",2),t._UZ(6,"de-copyable-text",3),t.YNc(7,at,3,0,"ng-container",1),t.YNc(8,st,5,0,"ng-container",1),t.qZA()(),t.TgZ(9,"tr",4)(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t.YNc(13,_t,7,5,"div",5),t.qZA()(),t.TgZ(14,"tr")(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA()(),t.TgZ(19,"tr")(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.qZA()(),t.YNc(24,mt,9,7,"tr",1),t.YNc(25,ut,3,1,"tr",1),t.YNc(26,dt,4,2,"tr",1),t.qZA(),t.TgZ(27,"div",6)(28,"button",7),t.NdJ("click",function(){return o.showPaymentQrCode=!o.showPaymentQrCode}),t.TgZ(29,"mat-icon",8),t._uU(30,"qr_code"),t.qZA(),t._uU(31),t.qZA(),t.YNc(32,pt,4,2,"button",9),t.qZA(),t.TgZ(33,"div",10)(34,"table",11)(35,"tr")(36,"th"),t._uU(37,"Month"),t.qZA(),t.TgZ(38,"th"),t._uU(39,"Collected"),t.qZA(),t.TgZ(40,"th"),t._uU(41,"Amount"),t.qZA(),t.TgZ(42,"th"),t._uU(43,"Settled"),t.qZA(),t.TgZ(44,"th"),t._uU(45,"Notes"),t.qZA()(),t.YNc(46,Ct,11,5,"tr",12),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("ngIf",o.isCableAdmin()),t.xp6(3),t.hij("",o.TKey.COMMON.STB,":"),t.xp6(2),t.Q6J("text",o.customer.STB),t.xp6(1),t.Q6J("ngIf","TACTV"===o.customer["STB Type"]),t.xp6(1),t.Q6J("ngIf","GTPL"===o.customer["STB Type"]),t.xp6(3),t.hij("",o.TKey.COMMON.MOBILE,":"),t.xp6(2),t.Q6J("ngForOf",o.customer.getMobileNumbers()),t.xp6(3),t.hij("",o.TKey.COMMON.CONNECTION_ON,":"),t.xp6(2),t.Oqu(o.customer.getConnectionDate()),t.xp6(3),t.hij("",o.TKey.COMMON.NOTES,":"),t.xp6(2),t.Oqu(o.customer["Own Notes"]||o.customer.Notes),t.xp6(1),t.Q6J("ngIf",o.customer.Latitude&&o.customer.Longitude),t.xp6(1),t.Q6J("ngIf",o.showMiniMap),t.xp6(1),t.Q6J("ngIf",o.showPaymentQrCode),t.xp6(5),t.hij(" ",o.TKey.COMMON.PAYMENT_QR_CODE," "),t.xp6(1),t.Q6J("ngIf",o.customer.hasLocationInfo()),t.xp6(14),t.Q6J("ngForOf",o.customer.getMonthsInOrder()))},dependencies:[k.$,K.D,b.sg,b.O5,T.zs,T.lW,S.qo,D.Hw,G],styles:["[_nghost-%COMP%]{display:flex;flex-grow:1;flex-wrap:wrap;justify-content:space-between;overflow:auto}.detail-section[_ngcontent-%COMP%]{display:flex;flex-grow:1;margin-bottom:6px}.detail-section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{display:flex;font-style:italic;padding-right:6px}.detail-section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){display:flex}.customer-details[_ngcontent-%COMP%]{width:100%}.customer-details[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{line-height:24px;max-width:150px}.customer-card-wrapper[_ngcontent-%COMP%]{display:flex;flex-grow:1;justify-content:center;width:100%}table.customer-card[_ngcontent-%COMP%]{border-collapse:collapse;border-color:#dee2e6;display:table;margin-top:12px;margin-bottom:12px;max-width:400px;text-align:center;width:100%}table.customer-card[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#d2d8ff;font-weight:500}table.customer-card[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.customer-card[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(222,226,230);border-collapse:collapse;padding:6px}table.customer-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], table.customer-details[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:0px;outline:none;width:50px}table.customer-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, table.customer-details[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}table.customer-card[_ngcontent-%COMP%]   input.notes[_ngcontent-%COMP%], table.customer-details[_ngcontent-%COMP%]   input.notes[_ngcontent-%COMP%]{width:200px}"]})}return i})();function ht(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.searchText="",t.KtG(o.onFilterChange())}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function ft(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.searchPhoneNumber="",t.KtG(o.onFilterChange())}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function bt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.searchID=null,t.KtG(o.onFilterChange())}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function xt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-option",22),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.areaFilter.onSelectionChange())}),t._uU(1),t.qZA()}if(2&i){const e=l.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function Tt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.exportQrCSV())}),t.TgZ(1,"mat-icon",24),t._uU(2,"payments"),t.qZA(),t._uU(3," Export QR CSV "),t.qZA()}}function Ot(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-option",22),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.statusFilter.onSelectionChange())}),t._uU(1),t.qZA()}if(2&i){const e=l.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function Mt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-option",22),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.allowCreditFilter.onSelectionChange())}),t._uU(1),t.qZA()}if(2&i){const e=l.$implicit,n=t.oxw(2);t.Q6J("value",e),t.xp6(1),t.Oqu("1"==e?n.TKey.COMMON.YES:n.TKey.COMMON.NO)}}function At(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-option",22),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(4);return t.KtG(o.agentsFilter.onSelectionChange())}),t._uU(1),t.qZA()}if(2&i){const e=l.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}const w=function(){return{standalone:!0}};function St(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"mat-select",4)(4,"div",5)(5,"mat-checkbox",6),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw(3);return t.KtG(a.agentsFilter.selectAll=o)})("change",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.agentsFilter.toggleSelectAll())}),t._uU(6,"Select All"),t.qZA()(),t.YNc(7,At,2,2,"mat-option",7),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(2),t.Oqu(e.TKey.COMMON.AGENTS),t.xp6(1),t.Q6J("formControl",e.agentsFilter.control),t.xp6(2),t.Q6J("ngModel",e.agentsFilter.selectAll)("ngModelOptions",t.DdM(5,w)),t.xp6(2),t.Q6J("ngForOf",e.agentsFilter.controlOptions)}}function Zt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.showSettlementConfirmationDialog=!0)}),t.TgZ(1,"div",31)(2,"mat-icon"),t._uU(3,"done"),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw(3);t.xp6(5),t.Oqu(e.TKey.COMMON.SETTLE_PENDING_COLLECTIONS)}}function Nt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",27)(1,"label"),t._uU(2,"Pending Settlement Filter"),t.qZA(),t.TgZ(3,"mat-slide-toggle",28),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw(2);return t.KtG(a.showPendingSettlement=o)})("ngModelChange",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.onPendingSettlementFilterChange())}),t._uU(4),t.qZA(),t.YNc(5,St,8,6,"mat-form-field",11),t.YNc(6,Zt,6,1,"button",29),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(3),t.Q6J("ngModel",e.showPendingSettlement)("ngClass",e.authService.hasPermission(e.METADATA.APPS.CABLE,e.METADATA.ROLES.ADMIN)?"":"de-nm--force"),t.xp6(1),t.AsE("",e.TKey.CUSTOMERS.SHOW_PENDING_SETTLEMENT," ",e.showPendingSettlement?"(Rs."+e.pendingSettlementAmount+"/-)":"",""),t.xp6(1),t.Q6J("ngIf",e.authService.hasPermission(e.METADATA.APPS.CABLE,e.METADATA.ROLES.ADMIN)),t.xp6(1),t.Q6J("ngIf",e.showPendingSettlement)}}function vt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-option",22),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.monthsFilter.onSelectionChange())}),t._uU(1),t.qZA()}if(2&i){const e=l.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function wt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",32)(1,"label"),t._uU(2,"Collection Filter"),t.qZA(),t.TgZ(3,"mat-slide-toggle",33),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw(2);return t.KtG(a.showCollectedCustomers=o)})("ngModelChange",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.onShowCollectedCustomersFilterChange())}),t._uU(4),t.qZA(),t.TgZ(5,"mat-form-field")(6,"mat-label"),t._uU(7),t.qZA(),t.TgZ(8,"mat-select",4)(9,"div",5)(10,"mat-checkbox",6),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw(2);return t.KtG(a.monthsFilter.selectAll=o)})("change",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.monthsFilter.toggleSelectAll())}),t._uU(11,"Select All"),t.qZA()(),t.YNc(12,vt,2,2,"mat-option",7),t.qZA()()()}if(2&i){const e=t.oxw(2);t.xp6(3),t.Q6J("ngModel",e.showCollectedCustomers),t.xp6(1),t.Oqu(e.showCollectedCustomers?e.TKey.CUSTOMERS.SHOWING_COLLECTED:e.TKey.CUSTOMERS.SHOWING_PENDING_COLLECTION),t.xp6(3),t.Oqu(e.TKey.COMMON.MONTHS),t.xp6(1),t.Q6J("formControl",e.monthsFilter.control),t.xp6(2),t.Q6J("ngModel",e.monthsFilter.selectAll)("ngModelOptions",t.DdM(7,w)),t.xp6(2),t.Q6J("ngForOf",e.monthsFilter.controlOptions)}}function yt(i,l){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field")(2,"mat-label"),t._uU(3),t.qZA(),t.TgZ(4,"mat-select",4)(5,"div",5)(6,"mat-checkbox",6),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.statusFilter.selectAll=o)})("change",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.statusFilter.toggleSelectAll())}),t._uU(7,"Select All"),t.qZA()(),t.YNc(8,Ot,2,2,"mat-option",7),t.qZA()(),t.TgZ(9,"mat-form-field")(10,"mat-label"),t._uU(11),t.qZA(),t.TgZ(12,"mat-select",4)(13,"div",5)(14,"mat-checkbox",6),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.allowCreditFilter.selectAll=o)})("change",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.allowCreditFilter.toggleSelectAll())}),t._uU(15,"Select All"),t.qZA()(),t.YNc(16,Mt,2,2,"mat-option",7),t.qZA()(),t.YNc(17,Nt,7,6,"div",25),t.YNc(18,wt,13,8,"div",26),t.BQk()}if(2&i){const e=t.oxw();t.xp6(3),t.Oqu(e.TKey.COMMON.STATUS),t.xp6(1),t.Q6J("formControl",e.statusFilter.control),t.xp6(2),t.Q6J("ngModel",e.statusFilter.selectAll)("ngModelOptions",t.DdM(12,w)),t.xp6(2),t.Q6J("ngForOf",e.statusFilter.controlOptions),t.xp6(3),t.Oqu(e.TKey.COMMON.ALLOW_CREDIT),t.xp6(1),t.Q6J("formControl",e.allowCreditFilter.control),t.xp6(2),t.Q6J("ngModel",e.allowCreditFilter.selectAll)("ngModelOptions",t.DdM(13,w)),t.xp6(2),t.Q6J("ngForOf",e.allowCreditFilter.controlOptions),t.xp6(1),t.Q6J("ngIf",!e.showCollectedCustomers),t.xp6(1),t.Q6J("ngIf",!e.showPendingSettlement)}}function Lt(i,l){if(1&i&&(t.TgZ(0,"mat-header-cell",45),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("ngClass","de-f-justifycenter"),t.xp6(1),t.Oqu("ACTIONS"===e?"":e)}}function Ft(i,l){1&i&&(t.ynx(0),t.TgZ(1,"mat-icon"),t._uU(2,"toggle_on"),t.qZA(),t.BQk())}function Ut(i,l){if(1&i&&(t.ynx(0),t._UZ(1,"de-copyable-text",49),t.BQk()),2&i){const e=t.oxw().$implicit,n=t.oxw().$implicit;t.xp6(1),t.Q6J("text",e[n])}}function qt(i,l){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.idNum()," ")}}function Jt(i,l){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const e=t.oxw().$implicit,n=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.AsE(" ",e[n]," ",o.showPendingSettlement?"("+e.getPendingSettlement(!0,o.agentsFilter.control.value)+")":""," ")}}function Et(i,l){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-icon",50),t.NdJ("click",function(o){t.CHM(e);const a=t.oxw(2).$implicit,s=t.oxw(3);return t.KtG(s.showEditDetailsDialog(a,o))}),t._uU(2,"edit"),t.qZA(),t.BQk()}}function Dt(i,l){if(1&i&&(t.ynx(0),t.YNc(1,Et,3,0,"ng-container",11),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",null==e?null:e.ID)}}function It(i,l){if(1&i&&(t.TgZ(0,"div",53),t._UZ(1,"de-copyable-text",49),t.TgZ(2,"div",54),t._UZ(3,"de-mobile-number",55)(4,"de-mobile-number",56),t.qZA()()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("text",e),t.xp6(2),t.Q6J("mobile",e),t.xp6(1),t.Q6J("mobile",e)}}function Pt(i,l){if(1&i&&(t.ynx(0),t.YNc(1,It,5,3,"div",52),t.BQk()),2&i){const e=l.$implicit;t.xp6(1),t.Q6J("ngIf",e)}}function kt(i,l){if(1&i&&(t.ynx(0),t.YNc(1,Pt,2,1,"ng-container",51),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.getMobileNumbers())}}function Qt(i,l){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const e=t.oxw().$implicit,n=t.oxw().$implicit;t.xp6(1),t.Oqu(e[n])}}function Kt(i,l){if(1&i&&(t.TgZ(0,"mat-cell",45),t.ynx(1,46),t.YNc(2,Ft,3,0,"ng-container",47),t.YNc(3,Ut,2,1,"ng-container",47),t.YNc(4,qt,2,1,"ng-container",47),t.YNc(5,Jt,2,2,"ng-container",47),t.YNc(6,Dt,2,1,"ng-container",47),t.YNc(7,kt,2,1,"ng-container",47),t.YNc(8,Qt,2,1,"ng-container",48),t.BQk(),t.qZA()),2&i){const e=l.$implicit,n=t.oxw().$implicit,o=t.oxw(2);t.Q6J("ngClass",o.getCellClassNames(e,n)),t.xp6(1),t.Q6J("ngSwitch",n),t.xp6(1),t.Q6J("ngSwitchCase",null==o.customerColumns||null==o.customerColumns.STATUS?null:o.customerColumns.STATUS.label),t.xp6(1),t.Q6J("ngSwitchCase",null==o.customerColumns||null==o.customerColumns.STB?null:o.customerColumns.STB.label),t.xp6(1),t.Q6J("ngSwitchCase",null==o.customerColumns||null==o.customerColumns.ID?null:o.customerColumns.ID.label),t.xp6(1),t.Q6J("ngSwitchCase",null==o.customerColumns||null==o.customerColumns.NAME?null:o.customerColumns.NAME.label),t.xp6(1),t.Q6J("ngSwitchCase","ACTIONS"),t.xp6(1),t.Q6J("ngSwitchCase",null==o.customerColumns||null==o.customerColumns.MOBILE?null:o.customerColumns.MOBILE.label)}}function Bt(i,l){1&i&&(t.ynx(0,42),t.YNc(1,Lt,2,2,"mat-header-cell",43),t.YNc(2,Kt,9,8,"mat-cell",44),t.BQk()),2&i&&t.s9C("matColumnDef",l.$implicit)}function Ht(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",65),t.NdJ("click",function(o){t.CHM(e);const a=t.oxw(2).$implicit,s=t.oxw(2);return t.KtG(s.showEditDetailsDialog(a,o))}),t.TgZ(1,"mat-icon",24),t._uU(2,"edit"),t.qZA()()}}function Rt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"section",59)(1,"div",60),t.YNc(2,Ht,3,0,"button",61),t.TgZ(3,"a",62)(4,"mat-icon",24),t._uU(5,"share"),t.qZA()(),t.TgZ(6,"button",63),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.utilService.copyToClipboard(o.getInfoAsText(!0)))}),t.TgZ(7,"mat-icon",24),t._uU(8,"content_copy"),t.qZA()()(),t.TgZ(9,"de-customer-card",64),t.NdJ("onCustomerUpdate",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.refreshData(!0))}),t.qZA()()}if(2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("ngIf",n.settingsService.isMobile),t.xp6(1),t.MGl("href","https://api.whatsapp.com/send?text=",n.encodeURIComponent(e.getInfoAsText(!0)),"",t.LSH),t.xp6(6),t.Q6J("customer",e)("nklAccount",n.nklAccount)("@detailExpand",e==n.expandedElement?"expanded":"collapsed")}}function Gt(i,l){if(1&i&&(t.TgZ(0,"mat-cell",57),t.YNc(1,Rt,10,5,"section",58),t.qZA()),2&i){const e=l.$implicit,n=t.oxw(2);t.Q6J("ngClass",e!==n.expandedElement?"de-noborder--force":""),t.uIk("colspan",n.displayedColumns.length),t.xp6(1),t.Q6J("ngIf",e===n.expandedElement)}}function Yt(i,l){1&i&&t._UZ(0,"mat-header-row")}function $t(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-row",66),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.expandedElement=s.expandedElement===a?null:a)}),t.qZA()}if(2&i){const e=l.$implicit,n=t.oxw(2);t.Q6J("ngClass",n.expandedElement===e?"highlight-row":"")}}function jt(i,l){1&i&&t._UZ(0,"mat-row",67)}const Vt=function(){return["expandedDetail"]},zt=function(){return[25,50,100,150]};function Wt(i,l){if(1&i&&(t.ynx(0),t.TgZ(1,"mat-table",34),t.YNc(2,Bt,3,1,"ng-container",35),t.ynx(3,36),t.YNc(4,Gt,2,3,"mat-cell",37),t.BQk(),t.YNc(5,Yt,1,0,"mat-header-row",38),t.YNc(6,$t,1,1,"mat-row",39),t.YNc(7,jt,1,0,"mat-row",40),t.qZA(),t._UZ(8,"mat-paginator",41),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("dataSource",e.data),t.xp6(1),t.Q6J("ngForOf",e.displayedColumns),t.xp6(3),t.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(7,Vt)),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(8,zt))}}const Xt=function(){return{height:"calc(100% - 50px)",width:"100%"}};function te(i,l){if(1&i&&(t.ynx(0),t._UZ(1,"de-map",68),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("styles",t.DdM(3,Xt))("options",e.mapOptions)("markerClusterData",e.markers)}}function ee(i,l){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"input",85),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.editCustomer[a]=o)}),t.qZA(),t.BQk()}if(2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngModel",n.editCustomer[e])}}function ne(i,l){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Oqu(n.editCustomerOrig.get(e))}}function oe(i,l){1&i&&t.GkF(0)}const ie=function(i,l){return{editCustomer:i,notesKey:l}};function le(i,l){if(1&i&&(t.ynx(0),t.YNc(1,oe,1,0,"ng-container",86),t.BQk()),2&i){const e=t.oxw().$implicit,n=t.oxw(2),o=t.MAs(46);t.xp6(1),t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",t.WLB(2,ie,n.editCustomer,n.editCustomer.getNotesKey(e)))}}function ae(i,l){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Oqu(n.editCustomerOrig.getNotes(e))}}function se(i,l){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.ynx(6,46),t.YNc(7,ee,2,1,"ng-container",47),t.YNc(8,ne,2,1,"ng-container",47),t.BQk(),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t.ynx(12,46),t.YNc(13,le,2,5,"ng-container",47),t.YNc(14,ae,2,1,"ng-container",47),t.BQk(),t.qZA()()),2&i){const e=l.$implicit,n=t.oxw(2);t.xp6(2),t.Oqu(e),t.xp6(2),t.Oqu(n.editCustomer.getCollectionDateStrFormat(e)),t.xp6(2),t.Q6J("ngSwitch",n.isCableAdmin()||n.canEditMonth(e)),t.xp6(1),t.Q6J("ngSwitchCase",!0),t.xp6(1),t.Q6J("ngSwitchCase",!1),t.xp6(2),t.Oqu(n.editCustomerOrig.getSettlementDateStrFormat(e)),t.xp6(2),t.Q6J("ngSwitch",n.isCableAdmin()||n.canEditMonth(e)),t.xp6(1),t.Q6J("ngSwitchCase",!0),t.xp6(1),t.Q6J("ngSwitchCase",!1)}}function re(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.editCustomer.ID="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function ce(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.editCustomer.Name="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function _e(i,l){if(1&i&&(t.TgZ(0,"mat-option",87),t._uU(1),t.qZA()),2&i){const e=l.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function me(i,l){if(1&i&&(t.TgZ(0,"mat-option",87),t._uU(1),t.qZA()),2&i){const e=l.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function ue(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.editCustomer.STB="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function ge(i,l){if(1&i&&(t.TgZ(0,"mat-option",87),t._uU(1),t.qZA()),2&i){const e=l.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function de(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.editCustomer.Mobile="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function pe(i,l){if(1&i&&(t.TgZ(0,"mat-option",87),t._uU(1),t.qZA()),2&i){const e=l.$implicit;t.Q6J("value",e[1]),t.xp6(1),t.Oqu(e[0])}}function Ce(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.editCustomer["Own Notes"]="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function he(i,l){1&i&&(t.TgZ(0,"mat-icon"),t._uU(1,"update"),t.qZA())}function fe(i,l){1&i&&t._UZ(0,"de-spinner",90),2&i&&t.Q6J("size",16)}function be(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",88),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.getLatLng(o.editCustomer))}),t.TgZ(1,"div",31),t.YNc(2,he,2,0,"mat-icon",11),t.YNc(3,fe,1,1,"de-spinner",89),t.TgZ(4,"span"),t._uU(5,"Update Current Location"),t.qZA()()()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!e.processingLatLng),t.xp6(1),t.Q6J("ngIf",e.processingLatLng)}}function xe(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.editCustomer.Latitude="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function Te(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.editCustomer.Longitude="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}const C=function(i){return{readonly:i}},Oe=function(){return["Active","Deactive","INACTIVE","SUSPENDED"]},Me=function(i){return[i,"1"]},Ae=function(i){return[i,"0"]},Se=function(i,l){return[i,l]};function Ze(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"de-dialog",69),t.NdJ("closeDialog",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.hideEditDetailsDialog())}),t.ynx(1,70),t._uU(2),t.BQk(),t.ynx(3,71),t.TgZ(4,"div")(5,"table",72)(6,"tr")(7,"th"),t._uU(8,"Month"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Collected"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Amount"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Settled"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Notes"),t.qZA()(),t.YNc(17,se,15,9,"tr",51),t.qZA(),t.TgZ(18,"p",73),t._uU(19),t.qZA(),t.TgZ(20,"mat-form-field",45)(21,"mat-label"),t._uU(22),t.qZA(),t.TgZ(23,"input",1),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.editCustomer.ID=o)}),t.qZA(),t.YNc(24,re,3,0,"button",2),t.qZA(),t.TgZ(25,"mat-form-field",45)(26,"mat-label"),t._uU(27),t.qZA(),t.TgZ(28,"input",1),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.editCustomer.Name=o)}),t.qZA(),t.YNc(29,ce,3,0,"button",2),t.qZA(),t.TgZ(30,"mat-form-field",45)(31,"mat-label"),t._uU(32),t.qZA(),t.TgZ(33,"mat-select",33),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.editCustomer.Area=o)}),t.YNc(34,_e,2,2,"mat-option",74),t.qZA()(),t.TgZ(35,"mat-form-field",45)(36,"mat-label"),t._uU(37),t.qZA(),t.TgZ(38,"mat-select",33),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.editCustomer.Status=o)}),t.YNc(39,me,2,2,"mat-option",74),t.qZA()(),t.TgZ(40,"mat-form-field",45)(41,"mat-label"),t._uU(42),t.qZA(),t.TgZ(43,"input",1),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.editCustomer.STB=o)}),t.qZA(),t.YNc(44,ue,3,0,"button",2),t.qZA(),t.TgZ(45,"mat-form-field",45)(46,"mat-label"),t._uU(47),t.qZA(),t.TgZ(48,"mat-select",33),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.editCustomer["STB Status"]=o)}),t.YNc(49,ge,2,2,"mat-option",74),t.qZA()(),t.TgZ(50,"mat-form-field",45)(51,"mat-label"),t._uU(52),t.qZA(),t.TgZ(53,"textarea",1),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.editCustomer.Mobile=o)}),t.qZA(),t.YNc(54,de,3,0,"button",2),t.qZA(),t.TgZ(55,"mat-form-field",45)(56,"mat-label"),t._uU(57),t.qZA(),t.TgZ(58,"mat-select",33),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.editCustomer.AllowCredit=o)}),t.YNc(59,pe,2,2,"mat-option",74),t.qZA()(),t.TgZ(60,"mat-form-field",45)(61,"mat-label"),t._uU(62),t.qZA(),t.TgZ(63,"input",75),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.editCustomer["Connection On"]=o)}),t.qZA(),t._UZ(64,"mat-datepicker-toggle",76)(65,"mat-datepicker",null,77),t.qZA(),t.TgZ(67,"mat-form-field",45)(68,"mat-label"),t._uU(69),t.qZA(),t.TgZ(70,"textarea",1),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.editCustomer["Own Notes"]=o)}),t.qZA(),t.YNc(71,Ce,3,0,"button",2),t.qZA(),t.TgZ(72,"div",78)(73,"label"),t._uU(74),t.qZA(),t.YNc(75,be,6,2,"button",79),t.TgZ(76,"a",80)(77,"div",31)(78,"mat-icon"),t._uU(79,"location_on"),t.qZA(),t.TgZ(80,"span"),t._uU(81,"Open Location"),t.qZA()()(),t.TgZ(82,"mat-form-field",45)(83,"mat-label"),t._uU(84),t.qZA(),t.TgZ(85,"input",1),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.editCustomer.Latitude=o)}),t.qZA(),t.YNc(86,xe,3,0,"button",2),t.qZA(),t.TgZ(87,"mat-form-field",45)(88,"mat-label"),t._uU(89),t.qZA(),t.TgZ(90,"input",1),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.editCustomer.Longitude=o)}),t.qZA(),t.YNc(91,Te,3,0,"button",2),t.qZA()()(),t.BQk(),t.ynx(92,81),t.TgZ(93,"button",82),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.hideEditDetailsDialog())}),t.TgZ(94,"div",31)(95,"mat-icon"),t._uU(96,"close"),t.qZA(),t.TgZ(97,"span"),t._uU(98),t.qZA()()(),t.TgZ(99,"button",83),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.checkUpdateCollections())}),t.TgZ(100,"div",31)(101,"mat-icon"),t._uU(102,"check"),t.qZA(),t.TgZ(103,"span"),t._uU(104),t.qZA()()(),t.TgZ(105,"button",84),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.checkUpdateCollections(!0))}),t.TgZ(106,"div",31)(107,"mat-icon"),t._uU(108,"cloud_off"),t.qZA(),t.TgZ(109,"span"),t._uU(110),t.qZA()()(),t.BQk(),t.qZA()}if(2&i){const e=t.MAs(66),n=t.oxw();t.xp6(2),t.AsE("",n.TKey.COMMON.EDIT," - ",n.editCustomerOrig.Name,""),t.xp6(15),t.Q6J("ngForOf",n.editCustomer.getMonthsInOrder()),t.xp6(2),t.Oqu(n.TKey.COMMON.DETAILS),t.xp6(1),t.Q6J("ngClass",t.VKq(59,C,!n.isCableAdmin())),t.xp6(2),t.Oqu(n.TKey.COMMON.ID),t.xp6(1),t.Q6J("ngModel",n.editCustomer.ID),t.xp6(1),t.Q6J("ngIf",n.editCustomer.ID&&n.isCableAdmin()),t.xp6(1),t.Q6J("ngClass",t.VKq(61,C,!n.isCableAdmin())),t.xp6(2),t.Oqu(n.TKey.COMMON.NAME),t.xp6(1),t.Q6J("ngModel",n.editCustomer.Name),t.xp6(1),t.Q6J("ngIf",n.editCustomer.Name&&n.isCableAdmin()),t.xp6(1),t.Q6J("ngClass",t.VKq(63,C,!n.isCableAdmin())),t.xp6(2),t.Oqu(n.TKey.COMMON.AREA),t.xp6(1),t.Q6J("ngModel",n.editCustomer.Area),t.xp6(1),t.Q6J("ngForOf",n.areaFilter.controlOptions),t.xp6(1),t.Q6J("ngClass",t.VKq(65,C,!n.isCableAdmin())),t.xp6(2),t.Oqu(n.TKey.COMMON.STATUS),t.xp6(1),t.Q6J("ngModel",n.editCustomer.Status),t.xp6(1),t.Q6J("ngForOf",n.statusFilter.controlOptions),t.xp6(1),t.Q6J("ngClass",t.VKq(67,C,!n.isCableAdmin())),t.xp6(2),t.Oqu(n.TKey.COMMON.STB),t.xp6(1),t.Q6J("ngModel",n.editCustomer.STB),t.xp6(1),t.Q6J("ngIf",n.editCustomer.STB&&n.isCableAdmin()),t.xp6(1),t.Q6J("ngClass",t.VKq(69,C,!n.isCableAdmin())),t.xp6(2),t.Oqu(n.TKey.COMMON.STB_STATUS),t.xp6(1),t.Q6J("ngModel",n.editCustomer["STB Status"]),t.xp6(1),t.Q6J("ngForOf",t.DdM(71,Oe)),t.xp6(1),t.Q6J("ngClass",t.VKq(72,C,!n.isCableAdmin())),t.xp6(2),t.Oqu(n.TKey.COMMON.MOBILE),t.xp6(1),t.Q6J("ngModel",n.editCustomer.Mobile),t.xp6(1),t.Q6J("ngIf",n.editCustomer.Mobile&&n.isCableAdmin()),t.xp6(1),t.Q6J("ngClass",t.VKq(74,C,!n.isCableAdmin())),t.xp6(2),t.Oqu(n.TKey.COMMON.ALLOW_CREDIT),t.xp6(1),t.Q6J("ngModel",n.editCustomer.AllowCredit),t.xp6(1),t.Q6J("ngForOf",t.WLB(80,Se,t.VKq(76,Me,n.TKey.COMMON.YES),t.VKq(78,Ae,n.TKey.COMMON.NO))),t.xp6(1),t.Q6J("ngClass",t.VKq(83,C,!n.isCableAdmin())),t.xp6(2),t.Oqu(n.TKey.COMMON.CONNECTION_ON),t.xp6(1),t.Q6J("matDatepicker",e)("ngModel",n.editCustomer["Connection On"]),t.xp6(1),t.Q6J("for",e),t.xp6(3),t.Q6J("ngClass",t.VKq(85,C,!n.isCableAdmin())),t.xp6(2),t.Oqu(n.TKey.COMMON.NOTES),t.xp6(1),t.Q6J("ngModel",n.editCustomer["Own Notes"]),t.xp6(1),t.Q6J("ngIf",n.editCustomer["Own Notes"]&&n.isCableAdmin()),t.xp6(3),t.Oqu(n.TKey.COMMON.LOCATION),t.xp6(1),t.Q6J("ngIf",n.isCableAdmin()),t.xp6(1),t.Q6J("href",n.geolocationService.getGoogleLocationUrl(n.editCustomer.Latitude,n.editCustomer.Longitude),t.LSH),t.xp6(6),t.Q6J("ngClass",t.VKq(87,C,!n.isCableAdmin())),t.xp6(2),t.Oqu(n.TKey.COMMON.LATITUDE),t.xp6(1),t.Q6J("ngModel",n.editCustomer.Latitude),t.xp6(1),t.Q6J("ngIf",n.editCustomer.Latitude&&n.isCableAdmin()),t.xp6(1),t.Q6J("ngClass",t.VKq(89,C,!n.isCableAdmin())),t.xp6(2),t.Oqu(n.TKey.COMMON.LONGITUDE),t.xp6(1),t.Q6J("ngModel",n.editCustomer.Longitude),t.xp6(1),t.Q6J("ngIf",n.editCustomer.Longitude&&n.isCableAdmin()),t.xp6(7),t.Oqu(n.TKey.COMMON.CANCEL),t.xp6(6),t.Oqu(n.TKey.COMMON.OK),t.xp6(6),t.Oqu(n.TKey.COMMON.SAVE)}}function Ne(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"input",91),t.NdJ("ngModelChange",function(o){const a=t.CHM(e);return t.KtG(a.editCustomer[a.notesKey]=o)}),t.qZA()}2&i&&t.Q6J("ngModel",l.editCustomer[l.notesKey])}function ve(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"de-confirmation-dialog",92),t.NdJ("onSuccess",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.settlePendingCollections())})("onCancel",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.showSettlementConfirmationDialog=!1)}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("title","Settle collections?")("content","Are you sure you want to settle collection amount of Rs."+e.pendingSettlementAmount+"/- from Agents ("+(e.agentsFilter.control.value.length?e.agentsFilter.control.value:e.agentsFilter.controlOptions).join(", ")+")?")}}class v extends _.H6{constructor(l,e){super(),this.routeSnapshot=l,this.cableService=e,this.data=new c.by([]),this.fullData=[],this.customerColumns=this.settingsService.metadata.sheetsInfo?.CUSTOMERS?.cols,this.allColumns=[this.customerColumns?.NAME?.label||"",this.customerColumns?.AREA?.label||"",this.customerColumns?.ID?.label||"",this.customerColumns?.MOBILE?.label||"",this.customerColumns?.STB?.label||""],this.displayedColumns=[],this.nklAccount=!1,this.viewType="table_view",this.searchID=null,this.searchText="",this.searchTextRegexp=new RegExp(""),this.searchPhoneNumber="",this.searchPhoneNumberRegexp=new RegExp(""),this.statusFilter=this.getNewFilterControl(["Active"],["Active","Inactive"]),this.allowCreditFilter=this.getNewFilterControl([],["1","0"]),this.areaFilter=this.getNewFilterControl([],[]),this.agentsFilter=this.getNewFilterControl([],[]),this.monthsFilter=this.getNewFilterControl([],[]),this.showAdvancedFilters=!1,this.showCollectedCustomers=!1,this.showPendingSettlement=!1,this.pendingSettlementAmount=0,this.showSettlementConfirmationDialog=!1,this.cacheInfo=null,this.processingLatLng=!1,this.mapOptions={layers:[_.F1[_.VX.SATELLITE]],zoom:17},this.markers=[],this.nklAccount=!!this.routeSnapshot.snapshot.data.nklAccount}ngOnInit(){this.filterArea=this.filterArea.bind(this),this.filterGpay=this.filterGpay.bind(this),this.filterStatus=this.filterStatus.bind(this),this.filterSearch=this.filterSearch.bind(this),this.filterSearchID=this.filterSearchID.bind(this),this.filterSearchPhoneNumber=this.filterSearchPhoneNumber.bind(this),this.filterCollection=this.filterCollection.bind(this),this.filterPendingSettlement=this.filterPendingSettlement.bind(this),this._subscriptions.push(this.eventService.isMobile.subscribe(()=>this.refreshDisplayedColumns())),this.settingsService.pageTitle=this.TKey.COMMON.CABLE}ngAfterViewInit(){this.data.paginator=this.paginator,this.refreshDisplayedColumns(),this.refreshData(!1,!0)}ngOnDestroy(){super.ngOnDestroy(),this.cacheInfo?.destroy()}getCustomerSheetLabel(){const l=this.settingsService.metadata.sheetsInfo;return this.nklAccount?l?.NKLCUSTOMERS.label:l?.CUSTOMERS.label}getLatLng(l){this.processingLatLng=!0,this.geolocationService.getCurrentPosition().subscribe(e=>{this.processingLatLng=!1,l.Latitude=e.coords.latitude,l.Longitude=e.coords.longitude})}refreshDisplayedColumns(){this.settingsService.isMobile?this.displayedColumns=this.allColumns.slice(0,3):(this.displayedColumns=this.allColumns.slice(0,5),this.displayedColumns.push("ACTIONS"))}refreshData(l=!1,e=!1){this.settingsService.processingText="Refreshing data...",this.apiGSheetDataService.getSheetData(this.getCustomerSheetLabel(),m.vj,l).pipe((0,O.b)(n=>this.getRefreshCacheInfo(`SHEET_${this.getCustomerSheetLabel()}`,this.cacheInfo).pipe((0,M.U)(o=>(this.cacheInfo=o,n)))),(0,O.b)(n=>this.storageService.getCableOfflieData(this.nklAccount).pipe((0,M.U)(o=>(this.fullData=n,(o||[]).forEach(a=>this.mergeOfflineData(a)),n))))).subscribe({next:n=>{this.settingsService.processingText="",this.initializeFilters(e)},error:()=>this.settingsService.processingText=""})}mergeOfflineData(l){const e=this.fullData.find(n=>n.ID===l.ID);e?(e.DraftChanges=l,Object.keys(l).forEach(n=>e[n]=l[n])):this.utilService.openErrorSnackBar(`Unknown entry in offline data. ${JSON.stringify(l)}`)}initializeFilters(l=!1){const e={},n=this.areaFilter.control.value;this.fullData.forEach(g=>e[g.Area]=!0),this.areaFilter.controlOptions=Object.keys(e),this.areaFilter.controlOptions.sort(),this.areaFilter.selectAll=!1,this.areaFilter.control.setValue(!n?.length||l?[]:n);const o=this.monthsFilter.control.value;this.monthsFilter.controlOptions=this.fullData[0]?.getMonthsInOrder()||[],this.monthsFilter.control.setValue(!o?.length||l?[]:o);let a={};const s=this.agentsFilter.control.value;this.fullData.forEach(g=>a=Object.assign(a,g.getCollectionAgents())),this.agentsFilter.controlOptions=Object.keys(a),this.agentsFilter.controlOptions.sort(),this.authService.hasPermission(this.METADATA.APPS.CABLE,this.METADATA.ROLES.ADMIN)?(this.agentsFilter.control.setValue(!s?.length||l?[]:s),this.agentsFilter.control.setValue([])):this.agentsFilter.control.setValue([this.authService.Username]),this.onFilterChange()}toggleAdvancedFilters(){this.showAdvancedFilters=!this.showAdvancedFilters,this.showPendingSettlement=!1,this.showCollectedCustomers=!1,this.monthsFilter.control.setValue([]),this.onFilterChange()}clearFilters(){this.searchID=0,this.searchText="",this.searchPhoneNumber="",this.areaFilter.selectAll=!1,this.areaFilter.control.setValue([]),this.statusFilter.selectAll=!1,this.statusFilter.control.setValue(["Active"]),this.allowCreditFilter.selectAll=!1,this.allowCreditFilter.control.setValue([]),this.showPendingSettlement=!1,this.agentsFilter.selectAll=!1,this.agentsFilter.control.setValue([]),this.showCollectedCustomers=!1,this.monthsFilter.selectAll=!1,this.monthsFilter.control.setValue([]),this.onFilterChange()}onPendingSettlementFilterChange(){this.showPendingSettlement&&(this.showCollectedCustomers=!1,this.monthsFilter.control.setValue([])),this.onFilterChange()}onShowCollectedCustomersFilterChange(){this.showCollectedCustomers&&(this.showPendingSettlement=!1,this.agentsFilter.control.setValue([])),this.onFilterChange()}onFilterChange(){const l=p=>!0;let e=this.filterArea,n=this.filterGpay,o=this.filterStatus,a=this.filterSearch,s=this.filterSearchID,g=this.filterSearchPhoneNumber,h=this.filterCollection,x=this.filterPendingSettlement;this.areaFilter._selectedObj={},(this.areaFilter.control.value||[]).forEach(p=>this.areaFilter._selectedObj[p]=!0),this.allowCreditFilter._selectedObj={},(this.allowCreditFilter.control.value||[]).forEach(p=>this.allowCreditFilter._selectedObj[p]=!0),this.statusFilter._selectedObj={},(this.statusFilter.control.value||[]).forEach(p=>this.statusFilter._selectedObj[p]=!0),(!this.allowCreditFilter.control.value?.length||(this.allowCreditFilter.control?.value||[]).length===this.allowCreditFilter.controlOptions?.length)&&(n=l),(!this.areaFilter.control.value?.length||(this.areaFilter.control?.value||[]).length===this.areaFilter.controlOptions?.length)&&(e=l),(!this.statusFilter.control.value?.length||(this.statusFilter.control?.value||[]).length===this.statusFilter.controlOptions?.length)&&(o=l),this.searchID||(s=l),this.searchText?this.searchTextRegexp=this.utilService.getFlexibleSearchTextRegexp(this.searchText):a=l,this.searchPhoneNumber?this.searchPhoneNumberRegexp=this.utilService.getFlexibleSearchTextRegexp(this.searchPhoneNumber):g=l,(!this.monthsFilter.control.value?.length||(this.monthsFilter.control.value||[]).length===this.monthsFilter.controlOptions?.length)&&(h=l),this.pendingSettlementAmount=0,this.showPendingSettlement?h=l:x=l,this.data.data=this.fullData.filter(n).filter(s).filter(e).filter(o).filter(a).filter(g).filter(h).filter(x),this.markers=this.data.data.filter(p=>p.hasLocationInfo()).map(p=>(0,Z.marker)([p.getLatitudeAsNum(),p.getLongitudeAsNum()],{icon:(0,_.r6)({icon:"tv",markerColor:p.isActive()?"green":"red",iconColor:p.hasPendingPayment()?"orange":"white"})}).bindPopup(p.getInfoAsText())),this.showPendingSettlement&&this.data.data.forEach(p=>this.pendingSettlementAmount+=p.getPendingSettlement(!1,this.agentsFilter.control.value))}filterSearchID(l){return l.idSearch(this.searchID)}filterSearch(l){return l.freeTextSearch(this.searchTextRegexp)}filterSearchPhoneNumber(l){return l.phoneNumberSearch(this.searchPhoneNumberRegexp)}filterArea(l){return this.areaFilter._selectedObj[l.Area]}filterStatus(l){return this.statusFilter._selectedObj.Active&&l.isActive()||this.statusFilter._selectedObj.Inactive&&!l.isActive()}filterGpay(l){return this.allowCreditFilter._selectedObj[1]&&l.allowCredit()||this.allowCreditFilter._selectedObj[0]&&l.noCredit()}filterCollection(l){const e=this.monthsFilter.control.value||[];return!e.length||e.every(n=>{const o=!!l[n];return o&&this.showCollectedCustomers||!o&&!this.showCollectedCustomers})}filterPendingSettlement(l){return!this.showPendingSettlement||!!l.getPendingSettlement(!1,this.agentsFilter.control.value)}getCellClassNames(l,e){const n=e===this.customerColumns?.NAME?.label||e===this.customerColumns?.AREA?.label?"":"align-center";return`${e===this.customerColumns?.NAME?.label?l.isActive()?"success-text":"danger-text":""} ${n} ${e===this.customerColumns?.MOBILE?.label?"de-f-column":""} ${l===this.expandedElement?"de-noborder--force":""}`}canEditMonth(l){const e=this.editCustomerOrig;return!e[l]&&!e.getCollectionBy(l)&&!e.getSettlementDate(l)}isCableAdmin(){return this.nklAccount?this.authService.isNklCableAdmin():this.authService.isCableAdmin()}checkUpdateCollections(l=!1){try{const e=this.editCustomerOrig,n=this.settingsService.getCustomerCols(),o={[n?.ID.label]:e.ID,[n?.NAME.label]:e.Name};if([n?.NAME.label,n?.AREA.label,n?.STATUS.label,n?.STB.label,n?.STB_STATUS.label,n?.MOBILE.label,n?.ALLOW_CREDIT.label,n?.OWN_NOTES.label,n?.CONNECTION_ON.label,n?.LATITUDE.label,n?.LONGITUDE.label].filter(s=>e[s]!=this.editCustomer[s]).forEach(s=>{o[s]=this.editCustomer[s]&&s===n?.CONNECTION_ON.label?this.editCustomer.formatDate(this.editCustomer[s]):this.editCustomer[s]}),this.editCustomer.getMonthsInOrder().forEach(s=>{this.canEditMonth(s)&&(this.editCustomer[s]||this.editCustomer.getNotes(s))?(this.editCustomer[s]&&(o[s]=this.editCustomer[s],o[this.editCustomer.getCollectionByKey(s)]=this.authService.Username,o[this.editCustomer.getCollectionDateKey(s)]=this.editCustomer.formatDate(Date.now())),o[this.editCustomer.getNotesKey(s)]=this.editCustomer.getNotes(s)||""):(this.isCableAdmin()&&this.editCustomer[s]!=e[s]||this.editCustomer.getNotes(s)!=e.getNotes(s))&&(o[s]=this.editCustomer[s],o[this.editCustomer.getNotesKey(s)]=this.editCustomer.getNotes(s)||"",this.editCustomer[s]||(o[this.editCustomer.getCollectionByKey(s)]="",o[this.editCustomer.getCollectionDateKey(s)]="",o[this.editCustomer.getSettlementToKey(s)]="",o[this.editCustomer.getSettlementDateKey(s)]=""))}),0===Object.keys(o).length)return this.hideEditDetailsDialog();l?(this.cableService.saveOfflineUpdate(o,this.nklAccount),this.mergeOfflineData(o),this.hideEditDetailsDialog()):(this.settingsService.processingText=`Updating '${e?.Name}'...`,this.cableService.saveCollectionUpdates(o,!1,s=>{this.settingsService.processingText="",s?this.utilService.openErrorSnackBar(s,"Close"):(this.utilService.openSnackBar(`Successfully updated '${e?.Name}'`,"Close"),this.hideEditDetailsDialog(),this.refreshData(!0,!1))}))}catch(e){this.settingsService.processingText="",this.utilService.openErrorSnackBar(e?.toString()||"Script error in submitting changes.","Close")}}showEditDetailsDialog(l,e){e?.stopPropagation(),e?.preventDefault(),this.editCustomerOrig=l,this.editCustomer=this.editCustomerOrig.clone()}hideEditDetailsDialog(){this.editCustomerOrig=null}settlePendingCollections(){console.log(this.agentsFilter.control.value),this.fullData.forEach(l=>{})}exportFilteredDataToCSV(){this.utilService.exportObjectsToCSV(this.data.data,"Cable Customers",["ID","Name","Mobile","Area","Status","NoCredit","Bulk Payment","STB","STB Status","STB Type","Own Notes"])}exportQrCSV(){const l=this.fullData.map(e=>[this.utilService.escapeCSVCell(e.ID),this.utilService.escapeCSVCell(e.Name),this.utilService.escapeCSVCell(e.Area),this.utilService.escapeCSVCell(e.Mobile),this.utilService.escapeCSVCell(e.rawPaymentNote()),this.utilService.escapeCSVCell(e.processedPaymentNote()),this.utilService.escapeCSVCell(e.upiUrl()),this.utilService.escapeCSVCell(encodeURIComponent(e.upiUrl())),this.utilService.escapeCSVCell(e.qrCodeUrl())]);l.unshift(["ID","Name","Area","Mobile","Raw Payment Note","Processed Payment Note","UPI Url","Encoded UPI Url","QR Code URL"]),this.utilService.exportToCSV(l,"customers")}static#t=this.\u0275fac=function(e){return new(e||v)(t.Y36(d.gz),t.Y36(q))};static#e=this.\u0275cmp=t.Xpm({type:v,selectors:[["de-cable-list"]],viewQuery:function(e,n){if(1&e&&t.Gf(F.NW,5),2&e){let o;t.iGM(o=t.CRH())&&(n.paginator=o.first)}},features:[t.qOj],decls:48,vars:27,consts:[[1,"filter-row","de-p-vbase"],["matInput","","type","text",3,"ngModel","ngModelChange"],["matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],["matInput","","type","number",3,"ngModel","ngModelChange"],["multiple","",3,"formControl"],[1,"select-all"],[3,"ngModel","ngModelOptions","ngModelChange","change"],[3,"value","click",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","class","de-f-grow",3,"click",4,"ngIf"],[1,"advanced-filter-label","de-sm-rbase-nolast"],[1,"de-cursorpointer",3,"click"],[4,"ngIf"],[1,"de-f-aligncenter","de-f-justifyright","de-sm-rbase-nolast","de-f-wrap","de-sm-bbase"],[1,"de-link",3,"click"],[3,"cacheInfo","refreshTriggerInterval","refresh"],["appearance","legacy",3,"ngModel","ngModelChange"],["value","table_view"],["value","map_view"],["classNames","customer-card-dialog",3,"closeDialog",4,"ngIf"],["editMonthNotes",""],[3,"title","content","onSuccess","onCancel",4,"ngIf"],["matSuffix","","mat-icon-button","",3,"click"],[3,"value","click"],["mat-raised-button","","color","primary",1,"de-f-grow",3,"click"],["matPrefix",""],["class","pending-settlement-filter",4,"ngIf"],["class","collection-filter",4,"ngIf"],[1,"pending-settlement-filter"],[3,"ngModel","ngClass","ngModelChange"],["mat-raised-button","","color","primary","class","de-m-tbase",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",1,"de-m-tbase",3,"click"],[1,"de-f-aligncenter","de-sm-rsmall-nolast"],[1,"collection-filter"],[3,"ngModel","ngModelChange"],["multiTemplateDataRows","",1,"mat-elevation-z8",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","expandedDetail"],["class","expanded-detail-cell",3,"ngClass",4,"matCellDef"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"ngClass","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","expanded-detail-row",4,"matRowDef","matRowDefColumns"],["pageSize","50","showFirstLastButtons","",3,"pageSizeOptions"],[3,"matColumnDef"],[3,"ngClass",4,"matHeaderCellDef"],[3,"ngClass",4,"matCellDef"],[3,"ngClass"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"text"],["color","primary",1,"de-cursorpointer","de-m-rbase",3,"click"],[4,"ngFor","ngForOf"],["class","mobile-cell de-sm-rsmall-nolast",4,"ngIf"],[1,"mobile-cell","de-sm-rsmall-nolast"],[1,"de-f-aligncenter","de-sm-rbase-nolast"],["displayType","CALL",3,"mobile"],["displayType","WHATSAPP",3,"mobile"],[1,"expanded-detail-cell",3,"ngClass"],["class","de-f-column de-p-vbase",4,"ngIf"],[1,"de-f-column","de-p-vbase"],[1,"de-fs-alignbottom","de-sm-rbase-nolast","de-m-bxsmall"],["mat-mini-fab","","color","primary",3,"click",4,"ngIf"],["mat-mini-fab","","color","accent","target","_blank",3,"href"],["mat-mini-fab","","color","accent",3,"click"],[3,"customer","nklAccount","onCustomerUpdate"],["mat-mini-fab","","color","primary",3,"click"],[3,"ngClass","click"],["mat-row","",1,"expanded-detail-row"],[3,"styles","options","markerClusterData"],["classNames","customer-card-dialog",3,"closeDialog"],["de-dialog-header",""],["de-dialog-body",""],[1,"customer-card","full-width"],[1,"mat-headline-5","de-m-bmedium"],[3,"value",4,"ngFor","ngForOf"],["matInput","",3,"matDatepicker","ngModel","ngModelChange"],["matIconSuffix","",3,"for"],["picker",""],[1,"location-container"],["mat-raised-button","","color","primary","class","de-m-bmedium de-m-rbase",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","target","_blank",1,"de-m-bmedium",3,"href"],["de-dialog-footer",""],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],["type","text",3,"ngModel","ngModelChange"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"value"],["mat-raised-button","","color","primary",1,"de-m-bmedium","de-m-rbase",3,"click"],["color","white",3,"size",4,"ngIf"],["color","white",3,"size"],["type","string",1,"notes",3,"ngModel","ngModelChange"],[3,"title","content","onSuccess","onCancel"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"mat-form-field")(2,"mat-label"),t._uU(3),t.qZA(),t.TgZ(4,"input",1),t.NdJ("ngModelChange",function(a){return n.searchText=a})("ngModelChange",function(){return n.onFilterChange()}),t.qZA(),t.YNc(5,ht,3,0,"button",2),t.qZA(),t.TgZ(6,"mat-form-field")(7,"mat-label"),t._uU(8),t.qZA(),t.TgZ(9,"input",3),t.NdJ("ngModelChange",function(a){return n.searchPhoneNumber=a})("ngModelChange",function(){return n.onFilterChange()}),t.qZA(),t.YNc(10,ft,3,0,"button",2),t.qZA(),t.TgZ(11,"mat-form-field")(12,"mat-label"),t._uU(13),t.qZA(),t.TgZ(14,"input",3),t.NdJ("ngModelChange",function(a){return n.searchID=a})("ngModelChange",function(){return n.onFilterChange()}),t.qZA(),t.YNc(15,bt,3,0,"button",2),t.qZA(),t.TgZ(16,"mat-form-field")(17,"mat-label"),t._uU(18),t.qZA(),t.TgZ(19,"mat-select",4)(20,"div",5)(21,"mat-checkbox",6),t.NdJ("ngModelChange",function(a){return n.areaFilter.selectAll=a})("change",function(){return n.areaFilter.toggleSelectAll()}),t._uU(22,"Select All"),t.qZA()(),t.YNc(23,xt,2,2,"mat-option",7),t.qZA()(),t.YNc(24,Tt,4,0,"button",8),t.TgZ(25,"p",9)(26,"span",10),t.NdJ("click",function(){return n.clearFilters()}),t._uU(27),t.qZA(),t.TgZ(28,"span",10),t.NdJ("click",function(){return n.toggleAdvancedFilters()}),t._uU(29),t.qZA()(),t.YNc(30,yt,19,14,"ng-container",11),t.qZA(),t.TgZ(31,"div",12)(32,"a",13),t.NdJ("click",function(){return n.exportFilteredDataToCSV()}),t._uU(33),t.qZA(),t.TgZ(34,"de-refresh-data",14),t.NdJ("refresh",function(){return n.refreshData(!0)}),t.qZA(),t.TgZ(35,"mat-button-toggle-group",15),t.NdJ("ngModelChange",function(a){return n.viewType=a}),t.TgZ(36,"mat-button-toggle",16)(37,"mat-icon"),t._uU(38,"toc"),t.qZA()(),t.TgZ(39,"mat-button-toggle",17)(40,"mat-icon"),t._uU(41,"public"),t.qZA()()()(),t.YNc(42,Wt,9,9,"ng-container",11),t.YNc(43,te,2,4,"ng-container",11),t.YNc(44,Ze,111,91,"de-dialog",18),t.YNc(45,Ne,1,1,"ng-template",null,19,t.W1O),t.YNc(47,ve,1,2,"de-confirmation-dialog",20)),2&e&&(t.xp6(3),t.Oqu(n.TKey.COMMON.SEARCH_ANYTHING),t.xp6(1),t.Q6J("ngModel",n.searchText),t.xp6(1),t.Q6J("ngIf",n.searchText),t.xp6(3),t.Oqu(n.TKey.COMMON.SEARCH_PHONE_NUMBER),t.xp6(1),t.Q6J("ngModel",n.searchPhoneNumber),t.xp6(1),t.Q6J("ngIf",n.searchPhoneNumber),t.xp6(3),t.Oqu(n.TKey.COMMON.ID),t.xp6(1),t.Q6J("ngModel",n.searchID),t.xp6(1),t.Q6J("ngIf",n.searchID),t.xp6(3),t.Oqu(n.TKey.COMMON.AREA),t.xp6(1),t.Q6J("formControl",n.areaFilter.control),t.xp6(2),t.Q6J("ngModel",n.areaFilter.selectAll)("ngModelOptions",t.DdM(26,w)),t.xp6(2),t.Q6J("ngForOf",n.areaFilter.controlOptions),t.xp6(1),t.Q6J("ngIf",n.isCableAdmin()&&n.settingsService.configurations.showCableCSVExport),t.xp6(3),t.Oqu(n.TKey.COMMON.CLEAR_FILTERS),t.xp6(2),t.Oqu(n.showAdvancedFilters?n.TKey.COMMON.HIDE_ADVANCED_FILTERS:n.TKey.COMMON.SHOW_ADVANCED_FILTERS),t.xp6(1),t.Q6J("ngIf",n.showAdvancedFilters),t.xp6(3),t.Oqu(n.TKey.COMMON.EXPORT_TO_CSV),t.xp6(1),t.Q6J("cacheInfo",n.cacheInfo)("refreshTriggerInterval",1440),t.xp6(1),t.Q6J("ngModel",n.viewType),t.xp6(7),t.Q6J("ngIf","table_view"===n.viewType),t.xp6(1),t.Q6J("ngIf","map_view"===n.viewType),t.xp6(1),t.Q6J("ngIf",n.editCustomerOrig),t.xp6(3),t.Q6J("ngIf",n.showSettlementConfirmationDialog))},dependencies:[W.z,k.$,X.a,Q.Gd,K.D,B.s,tt.O,b.mk,b.sg,b.O5,b.tP,b.RF,b.n9,b.ED,A.Fj,A.wV,A.JJ,A.On,A.oH,H.ey,T.zs,T.lW,T.RK,T.Tq,T.nh,R.A9,R.Yi,et.oG,E.Mq,E.hl,E.nW,S.KE,S.hX,S.qo,S.R9,D.Hw,nt.Nt,ot.Rr,F.NW,I.gD,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,Y],styles:["[_nghost-%COMP%]{display:block;padding:12px;height:100%;width:100%}",".filter-row[_ngcontent-%COMP%]   .advanced-filter-label[_ngcontent-%COMP%]{color:var(--primary);justify-content:end;margin-top:6px;margin-bottom:6px;text-decoration:underline;width:100%}mat-table[_ngcontent-%COMP%]     mat-header-row mat-header-cell:not([colspan]):last-child, mat-table[_ngcontent-%COMP%]     mat-row mat-cell:not([colspan]):last-child{max-width:90px;min-width:90px}.highlight-row[_ngcontent-%COMP%]{background-color:#f0f0f0}.select-all[_ngcontent-%COMP%]{padding:6px}.expanded-detail-row[_ngcontent-%COMP%], .expanded-detail-cell[_ngcontent-%COMP%]{min-height:0px}.collection-filter[_ngcontent-%COMP%], .pending-settlement-filter[_ngcontent-%COMP%], .location-container[_ngcontent-%COMP%]{align-items:flex-start;border:1px solid rgba(0,0,0,.38);border-radius:4px;flex-direction:column;padding:20px;position:relative}.collection-filter[_ngcontent-%COMP%] > label[_ngcontent-%COMP%], .pending-settlement-filter[_ngcontent-%COMP%] > label[_ngcontent-%COMP%], .location-container[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{background:#fafafa;color:#0009;font-size:12px;left:12px;padding:0 6px;position:absolute;top:-11px}.collection-filter[_ngcontent-%COMP%] > mat-slide-toggle[_ngcontent-%COMP%], .pending-settlement-filter[_ngcontent-%COMP%] > mat-slide-toggle[_ngcontent-%COMP%], .location-container[_ngcontent-%COMP%] > mat-slide-toggle[_ngcontent-%COMP%]{margin-bottom:16px}.collection-filter[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%], .pending-settlement-filter[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%], .location-container[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{width:100%}.location-container[_ngcontent-%COMP%]{padding-bottom:0}.mobile-cell[_ngcontent-%COMP%]{align-items:center;display:flex;flex-wrap:wrap;justify-content:center}.customer-details[_ngcontent-%COMP%]{width:100%}.customer-details[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{max-width:150px}table.customer-card[_ngcontent-%COMP%]{border-collapse:collapse;border-color:#dee2e6;display:table;margin-bottom:24px;max-width:400px;text-align:center;width:100%}table.customer-card[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#d2d8ff;font-weight:500}table.customer-card[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.customer-card[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(222,226,230);border-collapse:collapse;padding:6px}table.customer-card.full-width[_ngcontent-%COMP%], table.customer-details.full-width[_ngcontent-%COMP%]{min-width:100%}table.customer-card[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table.customer-details[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{text-align:left}table.customer-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([matinput]), table.customer-details[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([matinput]){border:0px;outline:none;width:50px}table.customer-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([matinput]):focus, table.customer-details[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([matinput]):focus{outline:none}table.customer-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([matinput]).notes, table.customer-details[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([matinput]).notes{width:200px}table.customer-card[_ngcontent-%COMP%]   input.mat-datepicker-input[_ngcontent-%COMP%], table.customer-details[_ngcontent-%COMP%]   input.mat-datepicker-input[_ngcontent-%COMP%]{width:auto}table.customer-card[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], table.customer-details[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border-color:#cacaca;border-radius:4px}  .customer-card-dialog{max-width:600px!important}"],data:{animation:[(0,u.X$)("detailExpand",[(0,u.SB)("collapsed",(0,u.oB)({height:"0px",minHeight:"0"})),(0,u.SB)("expanded",(0,u.oB)({height:"*"})),(0,u.eR)("expanded <=> collapsed",(0,u.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}})}(0,J.gn)([(0,L.Ds)(500)],v.prototype,"onFilterChange",null);var we=r(4612);const ye=function(){return{width:"100%",height:"100%"}};let $=(()=>{class i extends _.H6{constructor(e){super(),this.routeSnapshot=e,this.cacheInfo=null,this.rawCustomersData=[],this.visibleAgents={Anand:!1,Sarath:!1,Total:!0},this.collectionType="month",this.nklAccount=!1,this.chartType="line",this.chartOptions={animationEnabled:!0,exportEnabled:!0,zoomEnabled:!0,zoomType:"x",title:{text:""},axisX:{title:"",labelFormatter:n=>this.utilService.formatDate(n.label,"MMM'YY"),labelFontSize:14},axisY:{title:"",valueFormatString:"#,###,.##K",gridDashType:"dash",labelFontSize:14},toolTip:{shared:!0},legend:{cursor:"pointer",itemclick:n=>{n.dataSeries.visible=!(typeof n.dataSeries.visible>"u"||n.dataSeries.visible),this.visibleAgents[n.dataSeries.name]=n.dataSeries.visible,n.chart.render()},fontSize:16},data:[]},this.nklAccount=!!this.routeSnapshot.snapshot.data.nklAccount}ngOnInit(){this.settingsService.pageTitle=this.TKey.COMMON.CABLE,this.refreshRawData()}ngAfterViewInit(){this.chartOptions.data=[],this.renderChart()}ngOnDestroy(){super.ngOnDestroy(),this.cacheInfo?.destroy()}setChartInstance(e){this.chart=e}renderChart(){setTimeout(()=>this.chart?.render())}refreshFilters(){let e={};this.rawCustomersData.forEach(s=>e=Object.assign(e,s.getCollectionAgents()));const n=Object.keys(e);n.push("Total"),n.sort();let o={};const a=this.rawCustomersData[0]?.getMonthsInOrder()||[];n.forEach(s=>{o[s]={},a.forEach(g=>o[s][g]=0)}),this.rawCustomersData.forEach(s=>{const g=s.getCollectionInfoByAgent(this.collectionType);Object.keys(g).forEach(h=>{Object.keys(g[h]).forEach(x=>{o[h][x]=o[h][x]||0,o.Total[x]=o.Total[x]||0,o[h][x]+=g[h][x],o.Total[x]+=g[h][x]})})}),this.chartOptions.data=n.map(s=>({type:this.chartType,showInLegend:!0,name:s,visible:this.visibleAgents[s],dataPoints:a.map(g=>({label:g,y:o[s][g]}))})),this.renderChart()}getCustomerSheetLabel(){const e=this.settingsService.metadata.sheetsInfo;return this.nklAccount?e?.NKLCUSTOMERS.label:e?.CUSTOMERS.label}refreshRawData(e=!1){this.settingsService.processingText="Refreshing data...",this.apiGSheetDataService.getSheetData(this.getCustomerSheetLabel(),m.vj,e).pipe((0,O.b)(n=>this.getRefreshCacheInfo(`SHEET_${this.getCustomerSheetLabel()}`,this.cacheInfo).pipe((0,M.U)(o=>(this.cacheInfo=o,n))))).subscribe({next:n=>{this.settingsService.processingText="",this.rawCustomersData=n,this.refreshFilters()},error:n=>{this.utilService.openErrorSnackBar(n.message,"Close"),this.settingsService.processingText=""}})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(d.gz))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["de-cable-statistics"]],features:[t.qOj],decls:34,vars:10,consts:[[1,"de-f-column","de-h-full"],[1,"filter-row","de-m-bbase"],[3,"ngModel","ngModelChange"],["value","month"],[1,"de-nm--force"],[1,"hint-text"],["value","collectionDate"],["value","line"],["value","spline"],["value","bar"],["value","column"],[3,"cacheInfo","refreshTriggerInterval","refresh"],[1,"de-h-full","de-w-full","de-p-tbase"],[3,"styles","options","chartInstance"],["chart",""]],template:function(n,o){1&n&&(t.TgZ(0,"section",0)(1,"div",1)(2,"mat-form-field")(3,"mat-label"),t._uU(4),t.qZA(),t.TgZ(5,"mat-select",2),t.NdJ("ngModelChange",function(s){return o.collectionType=s})("ngModelChange",function(){return o.refreshFilters()}),t.TgZ(6,"mat-select-trigger"),t._uU(7),t.qZA(),t.TgZ(8,"mat-option",3)(9,"p",4),t._uU(10,"BILL MONTH"),t.qZA(),t.TgZ(11,"span",5),t._uU(12,"Show data by billing month."),t.qZA()(),t.TgZ(13,"mat-option",6)(14,"p",4),t._uU(15,"COLLECTION DATE"),t.qZA(),t.TgZ(16,"span",5),t._uU(17,"Show data by collection date."),t.qZA()()()(),t.TgZ(18,"mat-form-field")(19,"mat-label"),t._uU(20),t.qZA(),t.TgZ(21,"mat-select",2),t.NdJ("ngModelChange",function(s){return o.chartType=s})("ngModelChange",function(){return o.refreshFilters()}),t.TgZ(22,"mat-option",7),t._uU(23,"LINE"),t.qZA(),t.TgZ(24,"mat-option",8),t._uU(25,"SPLINE"),t.qZA(),t.TgZ(26,"mat-option",9),t._uU(27,"BAR"),t.qZA(),t.TgZ(28,"mat-option",10),t._uU(29,"COLUMN"),t.qZA()()()(),t.TgZ(30,"de-refresh-data",11),t.NdJ("refresh",function(){return o.refreshRawData(!0)}),t.qZA(),t.TgZ(31,"div",12)(32,"canvasjs-chart",13,14),t.NdJ("chartInstance",function(s){return o.setChartInstance(s)}),t.qZA()()()),2&n&&(t.xp6(4),t.Oqu(o.TKey.COMMON.COLLECTION_TYPE),t.xp6(1),t.Q6J("ngModel",o.collectionType),t.xp6(2),t.hij(" ","month"===o.collectionType?"BILL MONTH":"COLLECTION DATE"," "),t.xp6(13),t.Oqu(o.TKey.COMMON.CHART_TYPE),t.xp6(1),t.Q6J("ngModel",o.chartType),t.xp6(9),t.Q6J("cacheInfo",o.cacheInfo)("refreshTriggerInterval",1440),t.xp6(2),t.Q6J("styles",t.DdM(9,ye))("options",o.chartOptions))},dependencies:[B.s,A.JJ,A.On,we.xC,H.ey,S.KE,S.hX,I.gD,I.$L],styles:["[_nghost-%COMP%]{display:block;padding:12px;height:100%;width:100%}"]})}return i})();function Le(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",1),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.syncOfflineUpdates())}),t.TgZ(1,"div",2)(2,"mat-icon"),t._uU(3,"sync"),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.TKey.COMMON.SYNC)}}const Fe=[{path:"list",component:v},{path:"statistics",component:$},{path:"offline-updates",component:(()=>{class i extends _.H6{constructor(e,n){super(),this.routeSnapshot=e,this.cableService=n,this.offlineUpdateData=[],this.nklAccount=!1,this.nklAccount=!!this.routeSnapshot.snapshot.data.nklAccount}ngOnInit(){this.settingsService.pageTitle=this.TKey.COMMON.CABLE,this.refreshOfflineData(),this._subscriptions.push(this.cableService.offlineDataUpdated$.subscribe(()=>this.refreshOfflineData()))}refreshOfflineData(){this.storageService.getCableOfflieData(this.nklAccount).subscribe({next:e=>this.offlineUpdateData=e,error:e=>this.utilService.openErrorSnackBar(`Error in getting cable offline update data. ERROR: '${e}'.`,"Close")})}syncOfflineUpdates(){this.cableService.syncOfflineUpdates(this.nklAccount)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(d.gz),t.Y36(q))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["de-cable-offline-update"]],features:[t.qOj],decls:4,vars:4,consts:[["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[1,"de-f-aligncenter","de-sm-rsmall-nolast"]],template:function(n,o){1&n&&(t.YNc(0,Le,6,1,"button",0),t.TgZ(1,"pre"),t._uU(2),t.ALo(3,"json"),t.qZA()),2&n&&(t.Q6J("ngIf",null==o.offlineUpdateData?null:o.offlineUpdateData.length),t.xp6(2),t.Oqu(t.lcZ(3,2,o.offlineUpdateData)))},dependencies:[b.O5,T.lW,D.Hw,b.Ts],styles:["[_nghost-%COMP%]{display:block;padding:12px;height:100%;width:100%}"]})}return i})()},{path:"**",redirectTo:"list"}];let j=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[d.Bz.forChild(Fe),d.Bz]})}return i})();r(8313);let Ue=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({providers:[q],imports:[_.nC.forChild(),j]})}return i})()},298:(V,y)=>{function Z(c,u,m,_){var t={timer:void 0,lastArgs:[]},d=function(){for(var f=this,U=[],N=0;N<arguments.length;N++)U[N]=arguments[N];t.lastArgs=U,t.timer?clearTimeout(t.timer):u&&m.apply(this,t.lastArgs),t.timer=setTimeout(function(){u||m.apply(f,t.lastArgs),t.timer=void 0},c)};return _&&(d=d.bind(_)),d.options=t,d}function L(c,u){for(var m=[],_=2;_<arguments.length;_++)m[_-2]=arguments[_];if(0===m.length)throw new Error("function applied debounce decorator should be a method");if(1===m.length)throw new Error("method applied debounce decorator should have valid name");var t=m[0],d=m[1],f=3===m.length&&m[2]?m[2]:Object.getOwnPropertyDescriptor(t,d);if(f)return function M(c,u,m){return m.value=Z(c,u,m.value),m}(c,u,f);!function O(c,u,m,_){var t;Object.defineProperty(m,_,{configurable:!0,enumerable:!1,get:function(){return t},set:function(d){t=Z(c,u,d,this)}})}(c,u,t,d)}y.Ds=function F(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];var m=500,_=!1;if(c.length&&("number"==typeof c[0]||"object"==typeof c[0]&&void 0!==c[0].leading)){"number"==typeof c[0]&&(m=c[0]);var t=void 0;return"object"==typeof c[0]&&void 0!==c[0].leading&&(t=c[0]),1<c.length&&"object"==typeof c[1]&&void 0!==c[1].leading&&(t=c[1]),t&&(_=t.leading),function(){for(var d=[],f=0;f<arguments.length;f++)d[f]=arguments[f];return L.apply(void 0,[m,_].concat(d))}}return L.apply(void 0,[m,_].concat(c))}}}]);